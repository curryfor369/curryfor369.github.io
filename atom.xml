<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Curry&#39;s Blog</title>
  
  
  <link href="http://iscurry.com/atom.xml" rel="self"/>
  
  <link href="http://iscurry.com/"/>
  <updated>2020-09-10T10:04:26.525Z</updated>
  <id>http://iscurry.com/</id>
  
  <author>
    <name>curry</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Linux</title>
    <link href="http://iscurry.com/2020/09/04/Linux/"/>
    <id>http://iscurry.com/2020/09/04/Linux/</id>
    <published>2020-09-03T16:49:05.000Z</published>
    <updated>2020-09-10T10:04:26.525Z</updated>
    
    <content type="html"><![CDATA[<p>​    </p><h1 id="1、Centos6-9找回root密码"><a href="#1、Centos6-9找回root密码" class="headerlink" title="1、Centos6.9找回root密码"></a>1、Centos6.9找回root密码</h1><ol><li>开机按enter</li><li>按e进入</li><li>选第二个，按e</li><li>在后面添加 single, 按回车，注意single前有空格</li><li>按b键重启</li><li>输入 passwd 设置密码 </li></ol><a id="more"></a><h1 id="2、vi-vim编辑器"><a href="#2、vi-vim编辑器" class="headerlink" title="2、vi/vim编辑器"></a>2、vi/vim编辑器</h1><h2 id="1、一般模式"><a href="#1、一般模式" class="headerlink" title="1、一般模式"></a>1、一般模式</h2><ul><li>dd  ==删==除一行</li><li>d5d 删除5行</li><li>yy  ==复制==一行</li><li>y5y 复制5行</li><li>p   ==粘贴==</li><li>u ==撤销==</li><li>ctrl r 撤销撤销</li><li>^   当前行==开头==</li><li>$   当前行==结束==</li><li>gg  文件==开头==</li><li>G   文件==结尾==</li></ul><h2 id="2、编辑模式"><a href="#2、编辑模式" class="headerlink" title="2、编辑模式"></a>2、编辑模式</h2><ul><li>i   当前位置插入(进入编辑模式)</li><li>a   当前位置后插入（进入编辑模式）</li><li>o   向下一行插入（进入编辑模式）</li><li>ESC键 退出编辑模式</li></ul><h2 id="3、指令模式"><a href="#3、指令模式" class="headerlink" title="3、指令模式"></a>3、指令模式</h2><ul><li><p>:set nu 显示行号</p></li><li><p>?xxx 查找指定关键字   n/N 上下一个</p></li><li><p>:wq  保存件并退出</p></li><li><p>:!wq 强制保存并退出</p></li><li><p>ZZ    保存并退出</p></li></ul><h1 id="3、文件目录类-命令"><a href="#3、文件目录类-命令" class="headerlink" title="3、文件目录类==(命令)=="></a>3、文件目录类==(命令)==</h1><ol><li><p>创建文件夹 mkdir dirName    </p></li><li><p>创建多层文件夹 mkdir -p dirName</p></li><li><p>查看文件列表 ls -a    (包隐藏文件)    </p></li><li><p>查看文件列表详情 ll     </p></li><li><p>创建文件   touch fileName    </p></li><li><p>删除文件 rm -rf source    </p></li><li><p>切换路径到bin下 cd bin/            </p></li><li><p>回到上一级  cd ..    </p></li><li><p>切换到绝对路径  cd /d/soft/        </p></li><li><p>查看当前路径真实目录 pwd                </p></li><li><p>查看文件    cat fileName    </p></li><li><p>倒叙输出 tac fileName</p></li><li><p>查看文件后10行    tail -n 10    a.txt    </p><ul><li>-f    实时监控变化</li></ul></li><li><p>查看文件前10行    head -n 10        </p></li><li><p>more</p></li><li><p>less</p></li><li><p>追加  echo aaa &gt;&gt; a.txt</p></li><li><p>重定向 echo a &gt; a.txt</p></li><li><p>echo</p><ul><li>-e 转义“”号里面的字符，例如 echo -e “abc\tdef”</li></ul></li><li><p>软链接 ln -s source dest</p></li><li><p>历史 history</p></li><li><p>复制    cp source dest </p></li><li><p>强制复制 \cp source dest </p></li><li><p>移动或改名 mv source dest</p></li></ol><h1 id="4、时间日期类-命令"><a href="#4、时间日期类-命令" class="headerlink" title="4、时间日期类==(命令)=="></a>4、时间日期类==(命令)==</h1><ol><li>查看当前时间 date</li><li>查看当前日历 cal</li><li>指定格式时间 date “+%Y-%m-%d %H:%M:%S”     </li><li>设置时间 date -s “20121111 20:20:20”</li></ol><h1 id="5、用户、组管理类-命令"><a href="#5、用户、组管理类-命令" class="headerlink" title="5、用户、组管理类==(命令)=="></a>5、用户、组管理类==(命令)==</h1><ol><li><p>添加用户 useradd username</p></li><li><p>设置用户密码 passwd username</p></li><li><p>判断是否存在 id username</p></li><li><p>切换 su username</p></li><li><p>删除用户 userdel username</p></li><li><p>查看登录用户的信息 who/who am i /whoami</p></li><li><p>设置普通用户有root权限 </p><ul><li><p>修改 /etc/sudoers ,在root后添加一行</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">root    ALL=(ALL)     ALL</span><br><span class="line">user   ALL=(ALL)     ALL</span><br></pre></td></tr></table></figure></li></ul></li><li><p>查看所有用户 cat  /etc/passwd</p></li><li><p>修改用户  usermod -g 用户组 用户名</p></li><li><p>新增组 groupadd 组名</p></li><li><p>删除组 groupdel 组名</p></li><li><p>修改组 groupmod -n newName oldName</p></li><li><p>查看所有组 cat /etc/group</p></li></ol><h1 id="6、权限"><a href="#6、权限" class="headerlink" title="6、权限"></a>6、权限</h1><ol><li>改变权限 <ul><li>chmod  u+rwx g+rwx   o+rwx a.txt</li><li>chmod a+rwx a.txt</li><li>chmod 777 a.txt</li></ul></li><li>改变所有者 chown userName  fileName</li><li>改变所属组 chgrp groupName userName</li></ol><h1 id="7、fdisk"><a href="#7、fdisk" class="headerlink" title="7、fdisk"></a>7、fdisk</h1><ol start="0"><li><p>有两种磁盘结构</p><ul><li>IDE: 标识为： hdxn</li><li>SCSI: 标识为 sdxn   x代表第几块硬盘[a开始]，n代表第几个分区[1开始]</li></ul></li><li><p>查看分区详情  fdisk -l</p></li><li><p>查看所有挂载情况  lsblk</p></li><li><p>查看硬盘使用情况 df -TH</p></li><li><p>目录磁盘使用情况  du -h /目录   例如  du -ach –max-depth= 1 /usr</p><ul><li><p>-s 指定目录占用大小汇总</p></li><li><p>-h 带计量单位</p></li><li><p>-a 含文件</p></li><li><p>-max-depth=1 子目录深度</p></li><li><p>-c 列出明细的同时，增加汇总值</p></li></ul></li><li><p>增加一块新硬盘</p><ol><li><p>分区 fdisk /dev/sdb</p><ul><li>m 显示命令列表</li><li>n 新增分区</li><li>d 删除分区</li><li>w 写入并退出</li><li>p 显示磁盘分区</li></ul></li><li><p>格式化 sdb1  mkfs -t ext4 /dev/sdb1</p></li><li><p>挂载 mount /dev/sdb1   /home</p></li><li><p>卸载  umont 挂载路径或者挂载硬盘</p></li><li><p>永久挂载 vim /etc/fstab 添加一行</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/dev/sdb1/homeext4 defaults 0 0</span><br></pre></td></tr></table></figure></li></ol></li></ol><h1 id="8、crontab"><a href="#8、crontab" class="headerlink" title="8、crontab"></a>8、crontab</h1><ol><li><p>开启服务 service crontab start</p></li><li><p>操作 crontab</p><ul><li><p>-e 编辑</p></li><li><p>-l 查看</p></li><li><p>举例</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">crontab -e</span><br><span class="line">* * * * * date &gt;&gt; /home/date.log  </span><br><span class="line">分 时 天 月 周几</span><br><span class="line">第几分钟 那个小时 每月中的那一天 每年的那一个月 没有的星期几 </span><br><span class="line"></span><br><span class="line">*/3 10-15 1,15 * * date &gt;&gt; /home/date</span><br><span class="line"><span class="comment"># 每3分钟</span></span><br><span class="line"><span class="comment"># 每天的10到15点</span></span><br><span class="line"><span class="comment"># 每月1和15号</span></span><br></pre></td></tr></table></figure></li></ul></li></ol><h1 id="9、搜索查询"><a href="#9、搜索查询" class="headerlink" title="9、搜索查询"></a>9、搜索查询</h1><ol><li><p>find /home -name “java.jar” -user user -size +2048</p></li><li><p>which ls</p></li><li><p>whereis start-dfs.sh</p></li><li><p>==locate==: 快速查询，不扫描整个文件系统，需要定期更新locate数据库  updatedb</p></li><li><p>grep </p><p>－c：只输出匹配行的计数。</p><p>－I：不区分大小写(只适用于单字符)。</p><p>－h：查询多文件时不显示文件名。</p></li></ol><h1 id="10、进程、网络状态"><a href="#10、进程、网络状态" class="headerlink" title="10、进程、网络状态"></a>10、进程、网络状态</h1><ol start="2"><li>查看进程 ps -ef | grep ‘’”</li><li>查看进程 ps -aux </li><li>动态进程【查看内存】 top </li><li>杀死进程【强制】 kill -9 pid</li><li>进程树 pstree</li><li>io进程 iotop</li><li>io进程树 iotree</li><li>网络状态【端口占用】 netstat -antp </li><li>那些端口在监听 netstat -tlnp </li></ol><h1 id="11、ssh免密"><a href="#11、ssh免密" class="headerlink" title="11、ssh免密"></a>11、ssh免密</h1><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">步骤:</span><br><span class="line"></span><br><span class="line">1. 进入目录 cd /root/.ssh</span><br><span class="line">2. 生成私钥和公钥 ssh-keygen -t rsa</span><br><span class="line">3. 创建授权文件 touch authorized_keys</span><br><span class="line">4. 将公钥写入授权文件 并发送到其他虚拟机</span><br><span class="line">5. 保证在其他虚拟机的/root/.ssh/authorized_keys中有本虚拟机的公钥即可,</span><br><span class="line">这样就能在本虚拟机对另一台虚拟机进行免密ssh访问</span><br><span class="line">6. /root/.ssh/下的文件有</span><br><span class="line">1. authorized_keys</span><br><span class="line">2. id_rsa</span><br><span class="line">3. id_rsa.pub</span><br><span class="line">4. known_hosts</span><br><span class="line"></span><br><span class="line">普通用户ssh访问</span><br><span class="line">1. 切换到普通用户家目录 /home/xing/.ssh/</span><br><span class="line">2. 生成公钥，私钥，写入授权文件并发送</span><br><span class="line">ssh-keygen -t rsa</span><br><span class="line">cat id_rsa.pub &gt; authorized_keys</span><br><span class="line">ssh-copy-id node002</span><br><span class="line">3. 注意.ssh 和 里面文件的权限</span><br><span class="line">chmod 700 .ssh </span><br><span class="line">chmod 600 .ssh/*</span><br><span class="line">4. 如果还是因为权限问题登录不上</span><br><span class="line">sudo ssh node002</span><br><span class="line"></span><br><span class="line">另一种：</span><br><span class="line">1. 服务器分别 ssh-keygen -t rsa</span><br><span class="line">2. 复制id到其他机器  ssh-copy-id node1 </span><br><span class="line">3. ok</span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="12、虚拟机网络配置"><a href="#12、虚拟机网络配置" class="headerlink" title="12、虚拟机网络配置"></a>12、虚拟机网络配置</h1><hr><p>配置虚拟机网络 三大步</p><ol><li>windows 网络适配器 – VMnet8 – IPv4<br>ip 地址  192.168.10.1<br>子网掩码  255.255.255.0<br>默认网关  192.168.10.2<br>DNS 8.8.8.8</li><li>虚拟机虚拟网络设置<br>VMnet8 – NAT模式–更改设置<br>子网IP 192.168.10.0<br>子网掩码 255.255.255.0<br> NAT设置<br>网关IP: 192.168.10.2</li><li>ifcfg-eth0<br>vi /etc/sysconfig/network-scripts/ifcfg-eth0<br>ONBOOT=yes<br>BOOTPROTO=static<br>IPADDR=192.168.10.201<br>GATEWAY=192.168.10.2<br>PREFIX=24<br>IPV4_FAILURE_FATAL=yes<br>IPV6INIT=no<br>DNS1=192.168.10.2  # 这个和网关一致</li></ol><hr><h1 id="13、系统配置"><a href="#13、系统配置" class="headerlink" title="13、系统配置"></a>13、系统配置</h1><ol><li><p>修改主机ip vi /etc/sysconfig/network-scripts/ifcfg-eth0</p></li><li><p>修改主机名 vi /etc/sysconfig/network</p></li><li><p>修改mac地址 vi /etc/udev/rules.d/70-persistent-net.rules</p></li><li><p>重启网络服务 service network restart</p></li><li><p>关闭防火墙 service iptables stop(start）</p></li><li><p>查看防火墙状态 service iptables status</p></li><li><p>关闭防火墙开机自启 chkconfig iptables off(on)</p></li><li><p>查看防火墙开机自启状态 chkconfig iptables –list</p></li><li><p>开机自启级别设置 chkconfig iptables –level 3,6 on</p></li><li><p>查看ip  ifconfig         </p></li><li><p>查看主机名     hostname </p></li><li><p>修改主机名 vi /etc/sysconfig/network </p></li><li><p>配java环境变量 vi /etc/profile</p><pre><code>|export JAVA_HOME=/home/soft/jdk/jdk-1.8|export PATH=$&#123;JAVA_HOME&#125;/bin:$&#123;JAVA_HOME&#125;/jre/bin:$PATH|export CLASSPATH=$&#123;JAVA_HOME&#125;/lib:$&#123;JAVA_HOME&#125;/jre/bin:$CLASSPATH</code></pre></li><li><p>刷新 source /etc/profile  source是关键字，不是命令</p></li><li><p>修改hosts    vim /etc/hosts</p></li><li><p>别名 alias </p></li><li><p>查看所有java进程 jps</p></li><li><p>执行上次以find开头的命令 !find  </p></li><li><p>防止小键盘中文乱码 export TERM=ansi</p></li></ol><h1 id="14、yum-rpm"><a href="#14、yum-rpm" class="headerlink" title="14、yum/rpm"></a>14、yum/rpm</h1><ol><li>yum安装程序    yum -y install git  </li><li>yum搜索程序  yum  list | grep  ‘firefox’</li><li>rpm查看程序    rpm -qa | grep “jdk” </li><li>rpm卸载程序    rpm -e –nodeps <code>rpm -qa | grep &quot;jdk&quot;</code></li><li>rpm程程序安装 rpm -ivh …..  <ul><li>-i 安装 install</li><li>-v 日志 verbose</li><li>-h 刷新 hash</li></ul></li></ol><h1 id="15、压缩"><a href="#15、压缩" class="headerlink" title="15、压缩"></a>15、压缩</h1><ol start="24"><li>zip压缩    gzip source <pre><code>1. 只压缩文件，不压缩目录，不保留原文件，压缩为.gz文件</code></pre></li></ol><ol start="25"><li>zip解压 gunzip source.gz <pre><code>1. 解压.gz文件，不保留原文件</code></pre></li></ol><ol start="26"><li>zip压缩 zip -r test.zip file1 file2 file3  <pre><code>1. 将这三个文件压缩到test.zip,压缩目录，保留原文件</code></pre></li></ol><ol start="27"><li>zip解压 unzip -d dest source.zip <pre><code>1. 解压.zip文件到指定目录</code></pre></li></ol><ol start="28"><li>tar压缩 tar -zcvf source 打包成 *.tar.gz</li></ol><ol start="29"><li>tar解压 tar -zxvf source 解压 *.tar.gz<pre><code>&lt;-C dest&gt; 解压到指定目录 </code></pre></li></ol><h1 id="16、mysql安装卸载"><a href="#16、mysql安装卸载" class="headerlink" title="16、mysql安装卸载"></a>16、mysql安装卸载</h1><ol><li>Q/A 重装mysql<ol><li>查mysql <code>rpm -qa | grep -i mysql </code></li><li>卸载mysql  <code>rpm -e --nodeps mysql名字</code></li><li>手动卸载  <code>whereis mysql</code>     查出mysql所有目录，并删除</li><li>查找mysql <code>find / -name mysql</code></li><li>安装  <code>rpm -ivh Mysql-server</code></li></ol></li></ol><h1 id="17、-上传下载-rzsz"><a href="#17、-上传下载-rzsz" class="headerlink" title="17、 上传下载 rzsz"></a>17、 上传下载 rzsz</h1><ul><li><p>安装、上传、下载 </p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">yum install -y lrzsz </span><br><span class="line">rz</span><br><span class="line">sz a.txt </span><br></pre></td></tr></table></figure></li></ul><h1 id="18、-grep"><a href="#18、-grep" class="headerlink" title="18、 grep"></a>18、 grep</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">alisa grep=&#x27;grep --color=auto&#x27; 添加颜色 关键字 颜色</span><br><span class="line">grep &quot;a\|b&quot; 多个条件  同时匹配ab</span><br><span class="line">grep -v &quot;#&quot; 反向过滤  grep -v &#x27;123&#x27; 把123排除</span><br><span class="line">grep -n 显示行号</span><br><span class="line">grep -l 只显示文件名</span><br></pre></td></tr></table></figure><h1 id="19、sed"><a href="#19、sed" class="headerlink" title="19、sed"></a>19、sed</h1><ul><li>流编辑器，一次处理一行</li><li>替换，删除</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 1. 修改所有的79 变为 80</span></span><br><span class="line">sed -i &quot;s/79/80/&quot; a.txt </span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 2. 删除</span></span><br><span class="line">sed -i &quot;/^$/d&quot; a.txt </span><br></pre></td></tr></table></figure><p>sed –help</p><ol><li><p>标准输出 sed ‘p’ a.txt 默认缓存,打印两边</p></li><li><p>取消标准输出 sed -n ‘p’ a.txt  打印一边</p></li><li><p>向下添加 sed ‘1a hello’ a.txt 再所有包含c的行的下方添加hello</p></li><li><p>向上添加 sed ‘/c/i hello’ a.txt 在包含c的行的上方添加一行 hello</p></li><li><p>删除 sed ‘/c/d’ a.txt 删除所有包含c的行</p></li><li><p>替换 sed ‘s/c/C/‘ a.txt  将所有行的首单词的c–&gt;C</p></li><li><p>直接写入文件 sed -i ‘s/[tT]/S/‘ a.txt  替换所有行首单词的t或者T –&gt;S 并保存文件</p></li><li><p>执行多条命令 sed -e ‘expr1’ -e ‘expr2’ a.txt</p></li><li><p>匹配全部 加g  sed ‘s/c/C/g’ a.txt  将a.txt里的所有c–&gt;C</p></li><li><p>保留字替换(换中间) sed ‘s/(lo)cal(host)/\1ve\2/g’ hosts  将所有 localhost –&gt; lovehost</p><pre><code>sed &#39;s/localhost/lovehost/&#39; hostssed &#39;s/ \(lo\) cal \(host\) / \1 ve \2 /&#39; hosts</code></pre></li><li><p>替换(换两边) sed ‘s/local/–&amp;–/g’ hosts  将所有 local–&gt; –local–</p></li><li><p>几次到几次 x{m,n} m, ,n </p></li><li><p>取反 : 删除不包含local的行 sed ‘/local/!d’ a.txt </p></li></ol><h1 id="20、cut"><a href="#20、cut" class="headerlink" title="20、cut"></a>20、cut</h1><ul><li><p>每次读一行</p></li><li><p>cut -d : -f 2     分隔符 ， 取第几列，  默认制表符分割</p></li></ul><h1 id="21、awk"><a href="#21、awk" class="headerlink" title="21、awk"></a>21、awk</h1><ul><li>文本分析工具，把文件逐行读入，默认分隔符是空格或制表符</li><li>awk -F : </li></ul><ol start="0"><li><p>格式: awk <option> [action] file</p></li><li><p>awk ‘{print}’ 默认分隔符是空格或tab,默认打印全部,等同于$0</p></li><li><p>awk -F”:” ‘{print $1}’ /etc/passwd </p></li><li><p>内置变量 NR NF FS<br>awk -F”:” ‘/^root/{print “分隔符:”FS “\t行号: “NR “\t\t用户名: “$1 “\t\t家目录”$(NF-1)}’ /etc/passwd</p></li><li><p>awk ‘BEGIN[count=0]{print count}END{print “结束”}’ /etc/passwd</p></li><li><p>正则+ BEGIN END<br>awk ‘/root/{count++}END{print count}’ /etc/passwd   默认count是0,但是最好要给它初始化</p></li><li><p>if<br>awk ‘{if($1&gt;$2){print}}’ c.txt</p></li><li><p>if else if else<br>awk ‘{if($1&gt;$2){print $1” &gt; “$2}else if($1&lt;$2){print $1” &lt; “$2}else{print $1” = “$2}}’ c.txt</p></li><li><p>while<br>awk ‘{n=1;while(n&lt;=NF){print $n}}’ b.txt  </p></li><li><p>for<br>awk ‘{for(i=1;i&lt;NF;i++){print $i}}’ b.txt</p></li><li><p>for+if<br>awk ‘{for(i=1;i&lt;=NF;i++){print $i;if(i==1){continue}else{break}}}’ b.txt</p></li></ol><p>10  for<br>    awk ‘{name[x++]=$2}END{for(i in name){print name[i]}}’ b.txt<br>    awk ‘{name[x++]=$2}END{for(i=0;i&lt;NR;i++){print name[i]}}’ b.txt<br>    awk ‘{name[$1]=$2}’ ……………………………………..</p><pre><code>awk &#39;&#123;name[$2]++&#125;END&#123;for(i in name)&#123;print i,name[i]&#125;&#125;&#39; b.txt  === workcount [这就是以字符作为下标]</code></pre><ol start="11"><li><p>awk内建函数 sub : 只会找第一个<br>awk ‘{sub(/hello/,”hi”);print}’ y.txt</p></li><li><p>内建函数 gsub : 全文替换</p></li><li><p>index(String,”testString”) 第一次出现的下标的偏移量<br>awk ‘{print index($1,”e”)}’ z.txt</p></li><li><p>字符串的长度 length(Str)<br>字符串的长度   awk ‘{print length($2),$2}’ y.txt<br>每条记录的长度 awk ‘{print length}’ y.txt</p></li><li><p>截取 substr(Str,index,len) 偏移量从0开始,截取几个,不够的就空着<br>awk ‘{print $2,substr($2,2,6)}’ z.txt  从2开始截取,截取6个</p></li></ol><h1 id="22、正则表达式"><a href="#22、正则表达式" class="headerlink" title="22、正则表达式"></a>22、正则表达式</h1><ol><li><p>[^a-f]  ==取反== 除了a-f之外的字符</p></li><li><p>[a-z0-9]  </p></li><li><p>[0-9]{,10}  0-9,不能超过10位</p></li><li><p>&lt;the&gt; 匹配==单词==the &lt;&gt;代表单词边界  the  thee  three  reethe  只能匹配到the</p></li><li><p>^word : ==开头==    ，脱字符加work: 搜索以work开头的内容<br>work$  ==结尾==<br>^$  ==空行==<br>“” ==空格==<br>.  ==任意一个==字符,可代替空格,不能代替空行<br>\  转义符</p><p>* 0次或多次<br>.* 包含==所有==,除了空行<br>^.*  0个或多个开头</p><p>{} ==次数==  {2} {2,} {,5} {3,4}</p></li></ol><blockquote><p>bre 基本正则 ere 扩展正则<br>区别: 元字符的不同<br>   基本正则:$^.[]*<br>   扩展正则:(){}?+|</p></blockquote><h1 id="23、-ntp时间同步"><a href="#23、-ntp时间同步" class="headerlink" title="23、 ntp时间同步"></a>23、 ntp时间同步</h1><ul><li>==<strong>必须是root用户</strong>==</li><li>原理： 把时间服务器配好就行了，其他的服务器只需要执行同步命令就ok</li><li>注意： 只有服务器节点开ntpd服务，其他不开</li></ul><ol><li><p>时间服务器</p><ul><li><p>rpm -qa|grep ntp</p></li><li><p>yun -y install ntp</p></li><li><p>vi /etc/ntp.conf</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 第一处</span></span><br><span class="line"><span class="comment">#restrict 192.168.1.0 mask 255.255.255.0 nomodify notrap为</span></span><br><span class="line">restrict 192.168.1.0 mask 255.255.255.0 nomodify notrap</span><br><span class="line"><span class="comment"># 第二处</span></span><br><span class="line">server 0.centos.pool.ntp.org iburst</span><br><span class="line">server 1.centos.pool.ntp.org iburst</span><br><span class="line">server 2.centos.pool.ntp.org iburst</span><br><span class="line">server 3.centos.pool.ntp.org iburst为</span><br><span class="line"><span class="comment">#server 0.centos.pool.ntp.org iburst</span></span><br><span class="line"><span class="comment">#server 1.centos.pool.ntp.org iburst</span></span><br><span class="line"><span class="comment">#server 2.centos.pool.ntp.org iburst</span></span><br><span class="line"><span class="comment">#server 3.centos.pool.ntp.org iburst</span></span><br><span class="line"><span class="comment"># 第三处</span></span><br><span class="line">server 127.127.1.0</span><br><span class="line">fudge 127.127.1.0 stratum 10</span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li><p>vim /etc/sysconfig/ntpd</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 让硬件与系统时间一起同步</span></span><br><span class="line">SYNC_HWCLOCK=yes</span><br></pre></td></tr></table></figure></li><li><p>重新启动ntpd服务 service ntpd restart</p></li></ul></li></ol><ol start="2"><li><p>其他节点</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">crontab -e </span><br><span class="line">*/1 * * * * /usr/sbin/ntpdate node1</span><br></pre></td></tr></table></figure></li></ol><h1 id="24、rsync-xsync-集群同步"><a href="#24、rsync-xsync-集群同步" class="headerlink" title="24、rsync/xsync 集群同步"></a>24、rsync/xsync 集群同步</h1><ul><li>创建脚本 xsync</li><li>修改权限 chmod 777 xsync</li><li>发送到 /bin/</li><li>rsync  参数 user@ndode:dir<ul><li>-r 递归  recursion</li><li>-v 显示过程  view</li><li>-l 拷贝链接符号  ln</li></ul></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="keyword">if</span>(( <span class="variable">$#</span> == 0 ));</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line"><span class="built_in">echo</span> no args;</span><br><span class="line"><span class="built_in">exit</span>;</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line">fdir=`<span class="built_in">cd</span> -P $(dirname <span class="variable">$1</span>);<span class="built_in">pwd</span>`;</span><br><span class="line">fname=`basename <span class="variable">$1</span>`;</span><br><span class="line">user=`whoami`</span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$user</span>;</span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$fdir</span>;</span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$fname</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>((i=1;i&lt;4;i++));</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line"><span class="built_in">echo</span> ---------------node00<span class="variable">$i</span>----------------</span><br><span class="line">rsync -rvl <span class="variable">$fdir</span>/<span class="variable">$fname</span> <span class="variable">$user</span>@node00<span class="variable">$i</span>:<span class="variable">$fdir</span>;</span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure><h1 id="25、yum-ss代理"><a href="#25、yum-ss代理" class="headerlink" title="25、yum ss代理"></a>25、yum ss代理</h1><ul><li><p>前提 </p><ul><li>宿主机ip 192.168.10.1</li><li>虚拟机ip 192.168.10.103</li></ul></li><li><p>宿主机启动ss,并配置</p><p><img src="https://gitee.com/curryfor369/picgo/raw/master/img/20200610120030.png" alt="image-20200610114823573"></p></li><li><p>虚拟机配置 /etc/yum.conf</p><p><img src="https://gitee.com/curryfor369/picgo/raw/master/img/20200610120031.png" alt="image-20200610115012323"></p></li></ul><h1 id="26、shell编程"><a href="#26、shell编程" class="headerlink" title="26、shell编程"></a>26、shell编程</h1><p><img src="https://gitee.com/curryfor369/picgo/raw/master/img/20200609004427.png" alt="image-20200608220138131"></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line">arr=()</span><br><span class="line">arr[0]=1</span><br><span class="line">arr[1]=2</span><br><span class="line">arr[2]=3</span><br><span class="line">name=curryhelloy</span><br><span class="line"><span class="comment"># 数组长度</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;#arr[*]&#125;</span>  <span class="comment"># 3</span></span><br><span class="line"><span class="comment"># 字符串长度</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;#name&#125;</span>   <span class="comment"># 11</span></span><br><span class="line"><span class="comment"># 截取str</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;name:0:3&#125;</span>  <span class="comment"># cur</span></span><br><span class="line"><span class="comment"># 查找str</span></span><br><span class="line"><span class="built_in">echo</span> `expr index <span class="variable">$name</span> y`  <span class="comment"># 5</span></span><br><span class="line"><span class="comment"># 输出arr</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;arr[*]&#125;</span> <span class="comment"># 1 2 3</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;arr[@]&#125;</span> <span class="comment"># 1 2 3</span></span><br><span class="line"><span class="comment"># echo</span></span><br><span class="line"><span class="built_in">echo</span>  -e <span class="string">&quot;hello\c&quot;</span></span><br><span class="line"><span class="built_in">echo</span>  <span class="string">&quot;hi\t\n&quot;</span></span><br></pre></td></tr></table></figure><p>一、变量</p><ol><li><p>定义 变量名=值 变量名用字母数字下划线，数字不能开头，建议大写变量名</p></li><li><p>赋值<br>a. 普通赋值 NAME=’张三’<br>b. 使用$()或反引号``  NAME=$(ls) NAME=<code>ls</code><br>c. 伪赋值 let NAME=’李四’  只是这一行是李四，其它还是张三<br>d. 单引号和双引号的区别：</p><pre><code>单引号： 对所有特殊字符脱义，所有特殊字符只代表字符，没有了含义，so,&#39;$NAME&#39; 只是代表字符串双引号： 只对空格脱义</code></pre></li><li><p>修饰<br>a. unset 变量名 – 撤销变量<br>b. readonly 变量名 – 只读变量，无法unset<br>c. export 变量名 –  提升为全局变量，在文件里定义后，要source将该文件立即生效</p></li><li><p>位置参数变量<br>a. $n </p><pre><code>$0: 代表命令本身$1~$n 代表第1~n个参数 大于10时，用&#123;&#125;包括如：$&#123;10&#125;</code></pre><p>b. $#/$*  代表所有参数，*作为一个整体 ，#所有参数是独立的  </p><p>c. $#  代表所有参数的个数</p></li><li><p>预定义变量<br>a. $? 上一次运行是否正确 0 is true，1 is false ,其他为语法错误 数字有系统决定</p><p>b. $$ 当前进程(脚本)的PID</p><p>c. $! 后台最后一个进程的PID</p></li><li><p>运算符<br>由于 `` 和 $() 是执行命令的<br>a. expr</p><pre><code>a. 1+1 expr 1 + 1 -- 2b. 3-(3*4)   `expr 3 - $(expr 3 \* 4 )`</code></pre><p>b. $(())</p><pre><code>a. 3-(3*4)  $((3-(3*4)))</code></pre><p>c. $[]    </p><pre><code>a.3-(3*4)  $[3-(3*4)]</code></pre></li><li><p>条件判断  数字比较 用 -lt -gt -eq -ne 字符用 = !=<br>a. [ condition ]  echo $?  </p><p>b. 三元运算符 :  [ condition ] &amp;&amp; true || false</p><p>c. 判断运算： -lt小于 -le小于等于 -gt大于 -ge大于等于 -eq等于 -ne不等于  [1 -ne 2]</p><pre><code>    -rwx 读 写 执行  [ -rwx a.txt ]    -fde 文件 文件夹 存在 [ -ef a.txt ]</code></pre><p>d. 或与非 -o -a !</p><pre><code>[ ! expr ] [ expr1 -a expr2 ] [ expr1 -o expr2 ][[ ! expr  ]]  [[ expr1 &amp;&amp; expr2   ]] [[ expr1 || expr2 ]][[ 1 -eq 2 || &quot;xing&quot; = xin? ]] echo $? --&gt; 0if (( 1 == 1 )) #[ 1 -eq 1 ]</code></pre></li><li><p>if<br>if [ condition ]</p><pre><code>then ...</code></pre><p>elif [ conditon ]</p><pre><code>then ...</code></pre><p>else …<br>fi</p></li><li><p>case<br>case $1 in</p><pre><code>1) ... ;;  值可以不用双引号,如果是简单值的话a) ... ;;*) ... ;;</code></pre><p>esac</p></li><li><p>for<br>for var in list do …done</p><p>for(( i=1;i&lt;10;i++ )) do … done<br>for i in $* do … done </p><p>for n in 1 2 3 4 5 6 7<br>do</p><pre><code>echo $n</code></pre><p>done<br>类似于java<br>for(Integer n : n[1,2,3,4,5,6] )<br>String[] str = new String[];</p></li><li><p>while [ condition ] do … done</p></li><li><p>read -p ‘placeholder’ -t 5 var</p></li><li><p>函数 必须先定义后使用,因为shell是解释语言,从上往下,逐行运行<br>a. 系统函数</p><pre><code>1. basename [String | PathName][suffix] 截取文件名2. dirname [String | PathName] 截取最后一层目录</code></pre><p>b. 自定义函数 function funName(){}</p></li><li><p>变量的区域 像输出1906A<br>A=1906<br>echo “${A}A”</p></li><li><p>上传下载<br>yum -y install lrzsz<br>rz / sz name</p></li><li><p>多行注释<br>:&gt;&gt;E<br>…<br>E</p></li></ol><h1 id="待整理"><a href="#待整理" class="headerlink" title="==待整理=="></a>==待整理==</h1>]]></content>
    
    
    <summary type="html">&lt;p&gt;​    &lt;/p&gt;
&lt;h1 id=&quot;1、Centos6-9找回root密码&quot;&gt;&lt;a href=&quot;#1、Centos6-9找回root密码&quot; class=&quot;headerlink&quot; title=&quot;1、Centos6.9找回root密码&quot;&gt;&lt;/a&gt;1、Centos6.9找回root密码&lt;/h1&gt;&lt;ol&gt;
&lt;li&gt;开机按enter&lt;/li&gt;
&lt;li&gt;按e进入&lt;/li&gt;
&lt;li&gt;选第二个，按e&lt;/li&gt;
&lt;li&gt;在后面添加 single, 按回车，注意single前有空格&lt;/li&gt;
&lt;li&gt;按b键重启&lt;/li&gt;
&lt;li&gt;输入 passwd 设置密码 &lt;/li&gt;
&lt;/ol&gt;</summary>
    
    
    
    
  </entry>
  
  <entry>
    <title>hadoop</title>
    <link href="http://iscurry.com/2019/03/29/hadoop/"/>
    <id>http://iscurry.com/2019/03/29/hadoop/</id>
    <published>2019-03-29T07:03:48.000Z</published>
    <updated>2020-09-10T09:47:14.937Z</updated>
    
    <content type="html"><![CDATA[<h1 id="1-hadoop简介"><a href="#1-hadoop简介" class="headerlink" title="1. hadoop简介"></a>1. hadoop简介</h1><h2 id="1、作用"><a href="#1、作用" class="headerlink" title="1、作用"></a>1、作用</h2><ul><li><p>主要解决海量数据的存储和分析计算</p><a id="more"></a></li></ul><h2 id="2、历史"><a href="#2、历史" class="headerlink" title="2、历史"></a>2、历史</h2><ul><li><p>2006.3 hadoop产生</p></li><li><p>源于google的三篇论文</p></li><li><p>GFS – HDFS</p></li><li><p>MAP-REDUCE – MAPREDUCE</p></li><li><p>BIGTABLE – HBASE</p></li></ul><h2 id="3、三大版本"><a href="#3、三大版本" class="headerlink" title="3、三大版本"></a>3、三大版本</h2><ul><li>apache 原始版本</li><li>cloudera  大型企业用</li><li>hortonworks 文档较好</li></ul><h2 id="4、4大优势"><a href="#4、4大优势" class="headerlink" title="4、4大优势"></a>4、4大优势</h2><ul><li>高可靠性：多个副本</li><li>高容错性：失败任务自动重新分配</li><li>高扩展性：可拓展节点</li><li>高效性：在mapreduce思想下，hadoop是并行工作的</li></ul><h2 id="5、hadoop-1-x和2-x区别【组成架构】"><a href="#5、hadoop-1-x和2-x区别【组成架构】" class="headerlink" title="5、hadoop 1.x和2.x区别【组成架构】"></a>5、hadoop 1.x和2.x区别【组成架构】</h2><ul><li>1.x<ul><li>mapreduce 计算 + 资源调度 </li><li>hdfs 存储</li><li>common 辅助工具</li></ul></li><li>2.x 【模块化，解耦】<ul><li>hdfs 存储</li><li>yarn 资源调度</li><li>mapreduce 计算</li><li>common 辅助工具</li></ul></li></ul><h2 id="6、hdfs-组成"><a href="#6、hdfs-组成" class="headerlink" title="6、hdfs 组成:"></a>6、hdfs 组成:</h2><ul><li>namenode: 存储元数据 </li><li>datanode： 存储块数据，checksum<ul><li>secondary namenode【2NN】：每隔一段时间获取hdfs元数据的快照，辅助namenode工作，如checkpoint</li></ul></li></ul><h2 id="7、yarn-组成"><a href="#7、yarn-组成" class="headerlink" title="7、yarn 组成"></a>7、yarn 组成</h2><ul><li>resourcemanager: 资源调度总闸</li><li>nodemanager：每台机器的资源管理</li><li>applicationMaster</li><li>container</li></ul><h2 id="8、mapreduce-组成"><a href="#8、mapreduce-组成" class="headerlink" title="8、mapreduce 组成"></a>8、mapreduce 组成</h2><ul><li>map：并行处理输入数据</li><li>reduce：数据汇总</li></ul><h2 id="9、大数据生态体系"><a href="#9、大数据生态体系" class="headerlink" title="9、大数据生态体系"></a>9、大数据生态体系</h2><p><img src="https://gitee.com/curryfor369/picgo/raw/master/img/20200909064243.png" alt="image-20200611215224250"></p><ol><li><p>Sqoop：Sqoop是一款开源的工具，主要用于在Hadoop、Hive与传统的数据库(MySql)间进行数据的传递，可以将一个关系型数据库（例如 ：MySQL，Oracle 等）中的数据导进到Hadoop的HDFS中，也可以将HDFS的数据导进到关系型数据库中。</p></li><li><p>Flume：Flume是Cloudera提供的一个高可用的，高可靠的，分布式的海量日志采集、聚合和传输的系统，Flume支持在日志系统中定制各类数据发送方，用于收集数据；同时，Flume提供对数据进行简单处理，并写到各种数据接受方（可定制）的能力。</p></li><li><p>Kafka：Kafka是一种高吞吐量的分布式发布订阅消息系统，有如下特性：<br>（1）通过O(1)的磁盘数据结构提供消息的持久化，这种结构对于即使数以TB的消息存储也能够保持长时间的稳定性能。<br>（2）高吞吐量：即使是非常普通的硬件Kafka也可以支持每秒数百万的消息。<br>（3）支持通过Kafka服务器和消费机集群来分区消息。<br>（4）支持Hadoop并行数据加载。</p></li><li><p>Storm：Storm用于“连续计算”，对数据流做连续查询，在计算时就将结果以流的形式输出给用户。</p></li><li><p>Spark：Spark是当前最流行的开源大数据内存计算框架。可以基于Hadoop上存储的大数据进行计算。</p></li><li><p>Oozie：Oozie是一个管理Hdoop作业（job）的工作流程调度管理系统。</p></li><li><p>Hbase：HBase是一个分布式的、面向列的开源数据库。HBase不同于一般的关系数据库，它是一个适合于非结构化数据存储的数据库。</p></li><li><p>Hive：Hive是基于Hadoop的一个数据仓库工具，可以将结构化的数据文件映射为一张数据库表，并提供简单的SQL查询功能，可以将SQL语句转换为MapReduce任务进行运行。 其优点是学习成本低，可以通过类SQL语句快速实现简单的MapReduce统计，不必开发专门的MapReduce应用，十分适合数据仓库的统计分析。</p></li><li><p>R语言：R是用于统计分析、绘图的语言和操作环境。R是属于GNU系统的一个自由、免费、源代码开放的软件，它是一个用于统计计算和统计制图的优秀工具。</p></li><li><p>Mahout：Apache Mahout是个可扩展的机器学习和数据挖掘库。</p></li><li><p>ZooKeeper：Zookeeper是Google的Chubby一个开源的实现。它是一个针对大型分布式系统的可靠协调系统，提供的功能包括：配置维护、名字服务、 分布式同步、组服务等。ZooKeeper的目标就是封装好复杂易出错的关键服务，将简单易用的接口和性能高效、功能稳定的系统提供给用户。</p></li></ol><h1 id="2-hadoop环境搭建"><a href="#2-hadoop环境搭建" class="headerlink" title="2. hadoop环境搭建"></a>2. hadoop环境搭建</h1><h2 id="1-虚拟机环境准备"><a href="#1-虚拟机环境准备" class="headerlink" title="1. 虚拟机环境准备"></a>1. 虚拟机环境准备</h2><ol><li>克隆虚拟机<ol><li>主机名</li><li>静态Ip</li><li>物理ip</li><li>防火墙</li><li>网络服务</li><li>主机映射</li><li>ntp时间同步</li><li>crontab 时间同步任务</li><li>ssh免密登录</li><li>普通用户root权限</li><li>普通用户ssh免密登录</li><li>rsync/xsync同步脚本</li></ol></li></ol><h2 id="2-安装JDK"><a href="#2-安装JDK" class="headerlink" title="2. 安装JDK"></a>2. 安装JDK</h2><ol><li>解压</li><li>配置环境变量</li><li>java -version测试</li></ol><h2 id="3-安装hadoop"><a href="#3-安装hadoop" class="headerlink" title="3. 安装hadoop"></a>3. 安装hadoop</h2><ol><li>解压</li><li>配置环境变量</li><li>配置6个文件</li><li>分发hadoop和环境变量</li><li>格式化namenode</li><li>启动集群 start-dfs.sh start-yarn.sh</li><li>测试、web测试50070，8088</li></ol><h2 id="3-配置历史服务器"><a href="#3-配置历史服务器" class="headerlink" title="3. 配置历史服务器"></a>3. 配置历史服务器</h2><h2 id="4-配置日志聚合"><a href="#4-配置日志聚合" class="headerlink" title="4. 配置日志聚合"></a>4. 配置日志聚合</h2><h1 id="3-hadoop-编译源码"><a href="#3-hadoop-编译源码" class="headerlink" title="3. hadoop 编译源码"></a>3. hadoop 编译源码</h1><ol><li><p>意义：hadoop默认不支持的功能，想要支持，就要编译，实际上是将需要添加的功能的代码包含到 lib/native/, 编译后的hadoop包在/opt/hadoop-2.7.2-src/hadoop-dist/target 例如 想要支持LZO压缩，就要编译,hive中可以支持Snappy压缩</p></li><li><p>centos 保证网络畅通 ping <a href="http://www.baidu.com/">www.baidu.com</a> Ok</p></li><li><p>jar包准备</p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">jar包准备(hadoop源码、JDK8、maven、ant 、protobuf)</span><br><span class="line">（1）hadoop-2.7.2-src.tar.gz</span><br><span class="line">（2）jdk-8u144-linux-x64.tar.gz</span><br><span class="line">（3）apache-ant-1.9.9-bin.tar.gz（build工具，打包用的）</span><br><span class="line">（4）apache-maven-3.0.5-bin.tar.gz</span><br><span class="line">（5）protobuf-2.5.0.tar.gz（序列化的框架）</span><br></pre></td></tr></table></figure></li><li><p>解压jdk，环境变量， java -version</p></li><li><p>解压maven，配置mirros,环境变量 , mvn - version</p></li><li><p>解压ant，环境变量， ant-version</p></li><li><p>安装 glibc-headers  和 g++  yum -y install ….</p></li><li><p>解压protobuf,进入configure/ ,</p><ul><li><p>执行 </p><ul><li>make</li><li>make check</li><li>make install</li><li>ldconfig</li></ul></li><li><p>配置环境变量</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#LD_LIBRARY_PATH</span></span><br><span class="line"><span class="built_in">export</span> LD_LIBRARY_PATH=/opt/module/protobuf-2.5.0</span><br><span class="line"><span class="built_in">export</span> PATH=<span class="variable">$PATH</span>:<span class="variable">$LD_LIBRARY_PATH</span></span><br></pre></td></tr></table></figure></li></ul></li></ol><ol start="8"><li><p>安装openssl库 </p><ul><li>yum install openssl-devel</li></ul></li><li><p>安装 ncurses-devel库</p></li></ol><ul><li>yum install ncurses-devel</li></ul><ol start="10"><li>解压hadoop进入主目录</li></ol><ul><li>mvn package -Pdist,native -DskipTests -Dtar</li></ul><ol start="11"><li>成功的64位hadoop包在==<strong>/opt/hadoop-2.7.2-src/hadoop-dist/target</strong>==下</li></ol><h1 id="4-hdfs概述"><a href="#4-hdfs概述" class="headerlink" title="4. hdfs概述"></a>4. hdfs概述</h1><h2 id="1-定义"><a href="#1-定义" class="headerlink" title="1. 定义"></a>1. 定义</h2><ul><li>hdfs是 Hadoop Distributed File System ， 分布式文件管理系统</li><li>适用于一次写入，多次读出的场景</li></ul><h2 id="2-优缺点"><a href="#2-优缺点" class="headerlink" title="2. 优缺点"></a>2. 优缺点</h2><ul><li>优点<ul><li>高容错： 自动保存多个副本，丢失自动回复</li><li>适合处理大量大数据：能处理 GB，TB，PB级别的数据</li><li>可以构建在廉价的机器上，通过多副本机制提高可靠性</li></ul></li><li>缺点<ul><li>不适合处理大量小文件</li><li>不适合低延时数据访问</li><li>不支持并发写入，一个文件只能同时一个写，随机修改，只支持追加</li></ul></li></ul><h2 id="3-架构"><a href="#3-架构" class="headerlink" title="3. 架构"></a>3. 架构</h2><p><img src="https://gitee.com/curryfor369/picgo/raw/master/img/20200909064244.png" alt="image-20200611225021273"></p><p><img src="https://gitee.com/curryfor369/picgo/raw/master/img/20200909064245.png" alt="image-20200611225114473"></p><h2 id="4-hdfs块大小"><a href="#4-hdfs块大小" class="headerlink" title="4. hdfs块大小"></a>4. hdfs块大小</h2><ul><li>1.x 默认64MB</li><li>2.x默认 128MB</li><li>块大小取决于磁盘传输速率，一般的磁盘读写100MB/s，磁盘性能好的可以设置256MB</li><li>块调大，有利于寻址，增加查询效率，寻址时间是读写事件的1%时，效率最高</li><li>块设太小，增加寻址时间，程序一直在寻找块的开始位置</li><li>块设太大，磁盘传输这个Block时间明显高于查找时间，程序变慢</li></ul><h1 id="5-hdfs-shell"><a href="#5-hdfs-shell" class="headerlink" title="5. hdfs shell"></a>5. hdfs shell</h1><ul><li><p>执行命令有两种</p></li><li><p>hdfs dfs -ls /</p></li><li><p>hadoop fs -lsr /</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">1. hadoop fs ...  ==  hdfs dfs ...</span><br><span class="line">2. -lsr 递归查看</span><br><span class="line">3. -mkdir -p  创建多层目录</span><br><span class="line">4. -moveFromLocal == -put上传</span><br><span class="line">5. -appendToFile 追加</span><br><span class="line">6. -copyToLocal == -get  下载</span><br><span class="line">7. -getmerge 合并一个文件夹下的所有文件并复制</span><br><span class="line">8. -du -h -s  只显示大小</span><br><span class="line">9. -setrep 2 /a.txt 设置文件副本数  set replication</span><br></pre></td></tr></table></figure></li></ul><h1 id="6-hdfs-api"><a href="#6-hdfs-api" class="headerlink" title="6. hdfs api"></a>6. hdfs api</h1><ol><li>加压hadoop</li><li>配置环境边浪</li><li>创建maven，导入依赖，配置loj4j</li><li>上传下载创建删除</li><li>查看文件详细信息</li><li>定位下载</li></ol><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.logging.log4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>log4j-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.8.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.hadoop<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>hadoop-common<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.7.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.hadoop<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>hadoop-client<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.7.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.hadoop<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>hadoop-hdfs<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.7.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>jdk.tools<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jdk.tools<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">scope</span>&gt;</span>system<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">systemPath</span>&gt;</span>$&#123;JAVA_HOME&#125;/lib/tools.jar<span class="tag">&lt;/<span class="name">systemPath</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">log4j.rootLogger</span>=<span class="string">INFO, stdout</span></span><br><span class="line"><span class="meta">log4j.appender.stdout</span>=<span class="string">org.apache.log4j.ConsoleAppender</span></span><br><span class="line"><span class="meta">log4j.appender.stdout.layout</span>=<span class="string">org.apache.log4j.PatternLayout</span></span><br><span class="line"><span class="meta">log4j.appender.stdout.layout.ConversionPattern</span>=<span class="string">%d %p [%c] - %m%n</span></span><br><span class="line"><span class="meta">log4j.appender.logfile</span>=<span class="string">org.apache.log4j.FileAppender</span></span><br><span class="line"><span class="meta">log4j.appender.logfile.File</span>=<span class="string">target/spring.log</span></span><br><span class="line"><span class="meta">log4j.appender.logfile.layout</span>=<span class="string">org.apache.log4j.PatternLayout</span></span><br><span class="line"><span class="meta">log4j.appender.logfile.layout.ConversionPattern</span>=<span class="string">%d %p [%c] - %m%n</span></span><br></pre></td></tr></table></figure><h1 id="7-hdfs读写数据流程"><a href="#7-hdfs读写数据流程" class="headerlink" title="7. hdfs读写数据流程"></a>7. hdfs读写数据流程</h1><blockquote><p>写</p><ol><li>实际上也是io操作 </li><li>client 通过 distribute FileSystem向 namenode请求上传文件</li><li>nameNode 判断父目录是否存在，不存在No such dir,若存在</li><li>namenode 判断文件是否存在，若存在，file already exists，若不存在</li><li>namenode 检查可用的datanode节点，选择 距离近，负载低的节点信息返回，例如dn1,2,3</li><li>client 通过fsfileoutputstream向 dn1 请求上传数据第一个block(64/128/256)，</li><li>dn1 收到请求后继续调用 dn2, dn2 – dn3 建立通道，并逐级应答客户端</li><li>client 开始往dn1上传第一个Block,以packet为单位上传，先从磁盘读取放到一个本地内存缓存，</li><li>dn1收到1个packet就像dn2发送,dn2–dn3，dn1每传一个packet会放入一个应答队列，</li><li>当一个Block上传完成，应答队列将数据序列化到磁盘 </li><li>第一个block上传完毕后，client继续上传第二个block,直到所有block上传完成</li><li>关闭Io及fs资源</li></ol></blockquote><blockquote><p>读</p><ol><li>client 向 namenode强求读数据</li><li>namenode 将元数据信息返回给客户端</li><li>client 通过FSInputstream 向指定datanode节点读第一block</li><li>如果这个节点数据完整，一次io读完，之后关闭io</li><li>如果节点数据找不着，向同机架副本读，机架坏了，读另一个机架的副本，</li><li>每个节点读完后io流关闭，读另一个时重新打开</li><li>所有block读完，client将其合并</li></ol></blockquote><h1 id="8-网络拓扑和机架感知"><a href="#8-网络拓扑和机架感知" class="headerlink" title="8. 网络拓扑和机架感知"></a>8. 网络拓扑和机架感知</h1><p>namenode对节点距离的计算：==网络拓扑==： 找共同祖先，举例总和</p><p>机房<br>    集群1 d1<br>        机架1 r1<br>            服务器1 n1                1. d1,r1,n1 到自身的距离是0<br>            服务器2    n2                2. d1.r1.n1 到 d1.r1.n3 距离为2 共同祖先是r1<br>            服务器3 n3                3. d1.r1.n2 到 d2.r2.n5 距离4，共同祖先是机房<br>    集群2 d2<br>        机架2 r2<br>            服务器1 n4<br>            服务器2 n5<br>            服务器3 n6<br>        机架3 r3<br>            服务器1 n4<br>            服务器2 n5<br>            服务器3 n6</p><hr><p>==机架感知==–副本节点选择<br>若3个副本<br>同一机架不同节点放一个<br>不同机架放一个</p><hr><h1 id="9-namenode-工作机制"><a href="#9-namenode-工作机制" class="headerlink" title="9. namenode 工作机制"></a>9. namenode 工作机制</h1><ol><li>namenode启动时加载镜像文件和编辑日志到内存，也就是Hdfs元数据信息</li><li>client 对数据增删改，对元数据更新，记录操作日志，更新滚动日志 edits_inprogress_001 edits_001</li><li>内存数据更新</li><li>一定条件，触发2NN的checkpoint,copy namenode 的 fsimage &amp; edits to 2NN,加载到内存合并生成新的镜像文件fsimage.chkpoint</li><li>2NN copy fsimage.chkpoint to namenode &amp; rename to faimage</li></ol><p>1个block的元数据信息在内存中占150字节（byte）,一般的服务器为128G，也有256G<br>namenode元数据 存入内存、、磁盘(fsimage)、、edits、、定期合并、、2NN<br>2NN checkpoint,对namenode的元数据信息进行整理，对fsimage镜像和edits编辑日志进行合并<br>    满足 定时时间 一般1小时<br>    或满足 edits数据100w条，就执行checkpoint<br>合并细节：<br>    1. 滚动正在写的edits_inprogress_001编辑日志文件，生成新的edits_inprogress_002文件,将001改名edits_001<br>    2. 将edits1和fsimage拷贝到2NN将数据加载到内存进行合并，生成新的镜像文件fsimage.chkpoint<br>    3. 将fsimage.chkpoint拷贝到namenode重命名为fsimage</p><h1 id="10-fsiamge和edits"><a href="#10-fsiamge和edits" class="headerlink" title="10. fsiamge和edits"></a>10. fsiamge和edits</h1><ol><li>namenode格式化后，生成 <ul><li>fsimage_00000</li><li>fsimage_00000.md5</li><li>seen_txid</li></ul></li><li>增删改时<ul><li>edits_inprogress_0001</li></ul></li><li>合并后<ul><li>fsimage-00000</li><li>edit_00001</li><li>edit_inprogress_002</li><li>seen – 002</li><li>2NN上也会存放一份</li></ul></li><li>查看fsimage和edits文件<ul><li>fsimage:   hdfs oiv -p XML -i 镜像文件 -o 转换后的路径</li><li>edits : hdfs oev -p XML -i edits文件 -o 转换后路径</li></ul></li></ol><h1 id="11-checkpoint"><a href="#11-checkpoint" class="headerlink" title="11. checkpoint"></a>11. checkpoint</h1><p><img src="https://gitee.com/curryfor369/picgo/raw/master/img/20200909064246.png" alt="image-20200612094603509"></p><h1 id="12-常见端口"><a href="#12-常见端口" class="headerlink" title="12. 常见端口"></a>12. 常见端口</h1><ol><li>50070  web-hdfs</li><li>8088 web-mr</li><li>19888 web-history-server</li><li>9000 client-hadoop-cluster</li></ol>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;1-hadoop简介&quot;&gt;&lt;a href=&quot;#1-hadoop简介&quot; class=&quot;headerlink&quot; title=&quot;1. hadoop简介&quot;&gt;&lt;/a&gt;1. hadoop简介&lt;/h1&gt;&lt;h2 id=&quot;1、作用&quot;&gt;&lt;a href=&quot;#1、作用&quot; class=&quot;headerlink&quot; title=&quot;1、作用&quot;&gt;&lt;/a&gt;1、作用&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;p&gt;主要解决海量数据的存储和分析计算&lt;/p&gt;</summary>
    
    
    
    
  </entry>
  
  <entry>
    <title>hexo博客搭建</title>
    <link href="http://iscurry.com/2018/03/29/hexo%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA/"/>
    <id>http://iscurry.com/2018/03/29/hexo%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA/</id>
    <published>2018-03-29T07:03:48.000Z</published>
    <updated>2020-09-11T04:16:27.292Z</updated>
    
    <content type="html"><![CDATA[<h1 id="1、搭建步骤"><a href="#1、搭建步骤" class="headerlink" title="1、搭建步骤"></a>1、搭建步骤</h1><p>注：cmd为管理员模式 环境： win10+git+github+nodejs</p><ol><li><p>下载cmder完整版，配置cmder, 管理员bash，开机bash，中文字符集</p> <a id="more"></a></li><li><p>下载安装node.js</p></li><li><p>在nodejs下创建node_global、node_cache</p><p> <img src="https://gitee.com/curryfor369/picgo/raw/master/img/20200910184220.png"></p></li><li><p>配置nodejs环境变量</p><ol><li>系统变量NODE_PATH——-D:\soft\nodejs\node_global\node_modules</li><li>系统变量PATH————D:\soft\nodejs\</li><li>用户Path—————将C:\Users\hua\AppData\Roaming\npm改为D:\soft\nodejs\node_global</li></ol></li><li><p>cmder查看node版本 node -v</p></li><li><p>cmder查看npm版本 npm -v</p></li><li><p>配置全局模块安装目录   npm config set prefix “D:\soft\nodejs\node_global”</p></li><li><p>配置缓存目录 npm config set cache “D:\soft\nodejs\node_cache”</p></li><li><p>验证配置成功 npm config list</p></li><li><p>由于npm镜像站点慢，安装淘宝站点 cnpm npm install -g cnpm –registry=<a href="https://registry.npm.taobao.org/">https://registry.npm.taobao.org</a></p></li><li><p>查看cnpm版本 cnpm -v</p></li><li><p>安装hexo客户端  cnpm install -g hexo-cli</p></li><li><p>查看hexo版本 hexo -v</p></li><li><p>切换淘宝源  <code>npm config set registry https://registry.npm.taobao.org info underscore</code></p><p>  <img src="https://gitee.com/curryfor369/picgo/raw/master/img/20200411210650.png"></p><p> <img src="https://gitee.com/curryfor369/picgo/raw/master/img/image-20200411210851265.png" alt="image-20200411210851265"></p></li><li><p>进入一个目录创建一个新的文件夹 我的: /d/blog</p></li><li><p>cdmer切换到blog下，初始化hexo：  hexo init</p></li><li><p>我的报错install dependencies 找不到install类</p></li><li><p>进入blog里 cnpm install可以解决</p></li><li><p>启动hexo服务 hexo s，默认4000端口</p></li><li><p>ctrl+c停掉服务，进入blog目录</p></li><li><p>新建一篇文章  hexo n “我的第一篇文章”</p></li><li><p>进入 curryblog/source/_posts/  查看生成一个文件 “我的第一篇文章.md” vi进行编辑</p></li><li><p>退到blog/ 清理一下 hexo clean</p></li><li><p>在blog/重新构建一下 hexo g</p></li><li><p>启动服务进入localhost:4000,看到新增的一篇文章</p></li><li><p>新建一个github仓库 命名 githubUserName.github.io 我的是：gudeball.github.io</p></li><li><p>在blog目录下装一个git部署地插件 cnpm install –save hexo-deployer-git</p></li><li><p>进入blog/_config.yml 最下修改</p> <figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">type:</span> <span class="string">git</span></span><br><span class="line"><span class="attr">repo:</span> <span class="string">https://github.com/gudeball/gudeball.github.io.git</span> <span class="comment">#刚才创建的仓库地址</span></span><br><span class="line"><span class="attr">branch:</span> <span class="string">master</span></span><br></pre></td></tr></table></figure></li><li><p>配置git全局信息</p> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">git config --list <span class="comment"># 查看全部配置</span></span><br><span class="line">git config user.name<span class="comment"># 查看单个属性</span></span><br><span class="line">git config --global --edit <span class="comment"># 编辑配置</span></span><br><span class="line">git config --global user.name curryfor  <span class="comment"># 设置属性</span></span><br><span class="line">git config --global --<span class="built_in">unset</span> user.name   <span class="comment"># 删除属性</span></span><br><span class="line">git remote add origin https://github.com/curryfor369/curryfor369.github.io.git <span class="comment"># 推送地址</span></span><br></pre></td></tr></table></figure></li><li><p>部署到远端 hexo d</p></li><li><p>查看原来github的仓库多了一些东西</p></li><li><p>这时就能访问了，githubUsername.github.io进入博客主页 ，我的博客主页 gudeball.github.io</p></li><li><p>到此部署完成</p></li><li><p>hexo主题推荐： github.com/litten/hexo-theme-yilia</p></li><li><p>克隆一个主题 git clone <a href="https://github.com/litten/hexo-theme-yilia.git">https://github.com/litten/hexo-theme-yilia.git</a> themes/yilia</p></li><li><p>即进入blog/修改_config文件 找到 theme 默认是landscaps 修改为yilia</p></li><li><p>重新清理一下 hexo clean</p></li><li><p>重新生成一下 hexo g</p></li><li><p>本地查看 hexo s</p></li><li><p>推送 hexo d</p></li><li><p>查看博客 gudeball.github.io</p></li></ol><h1 id="2、简洁版步骤"><a href="#2、简洁版步骤" class="headerlink" title="2、简洁版步骤:"></a>2、简洁版步骤:</h1><ol><li>建一个空文件夹进入管理员cmd</li><li>初始化   hexo init</li><li>提示错误之后  cnpm install</li><li>安装git部署  cnpm install –save hexo-deployer-git</li><li>克隆主题  git clone <a href="https://github.com/litten/hexo-theme-yilia.git">https://github.com/litten/hexo-theme-yilia.git</a> themes/yilia</li><li>修改 _config.yml</li></ol><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">title:</span> <span class="string">Curry&#x27;s</span> <span class="string">Blog</span></span><br><span class="line"><span class="attr">theme:</span> <span class="string">yilia</span></span><br><span class="line"><span class="attr">deploy:</span></span><br><span class="line">  <span class="attr">type:</span> <span class="string">git</span></span><br><span class="line">  <span class="attr">repo:</span> <span class="string">https://github.com/gudeball/gudeball.github.io.git</span></span><br><span class="line">  <span class="attr">branch:</span> <span class="string">master</span></span><br><span class="line"><span class="attr">jsonContent:</span></span><br><span class="line">  <span class="attr">meta:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">pages:</span> <span class="literal">false</span></span><br><span class="line">    <span class="attr">posts:</span></span><br><span class="line">    <span class="attr">title:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">date:</span> <span class="literal">true</span></span><br><span class="line"><span class="attr">path:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">text:</span> <span class="literal">false</span></span><br><span class="line">    <span class="attr">raw:</span> <span class="literal">false</span></span><br><span class="line">    <span class="attr">content:</span> <span class="literal">false</span></span><br><span class="line">    <span class="attr">slug:</span> <span class="literal">false</span></span><br><span class="line">    <span class="attr">updated:</span> <span class="literal">false</span></span><br><span class="line">    <span class="attr">comments:</span> <span class="literal">false</span></span><br><span class="line">    <span class="attr">link:</span> <span class="literal">false</span></span><br><span class="line">    <span class="attr">permalink:</span> <span class="literal">false</span></span><br><span class="line">    <span class="attr">excerpt:</span> <span class="literal">false</span></span><br><span class="line">    <span class="attr">categories:</span> <span class="literal">false</span></span><br><span class="line">    <span class="attr">tags:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><ol start="7"><li>修改 yilia/_config.yml</li></ol><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">root:</span> <span class="string">/</span></span><br><span class="line"></span><br><span class="line"><span class="attr">favicon:</span> <span class="string">https://gitee.com/curryfor369/picgo/raw/master/img/ball.ico</span> <span class="comment"># 图标</span></span><br><span class="line"></span><br><span class="line"><span class="attr">avatar:</span> <span class="string">https://gitee.com/curryfor369/picgo/raw/master/img/avatar.jpg</span> <span class="comment"># 头像</span></span><br><span class="line"></span><br><span class="line"><span class="attr">friends:</span> <span class="comment"># 友链</span></span><br><span class="line">  <span class="string">飞速直播:</span> <span class="string">https://www.fszb8.com/</span></span><br><span class="line">  <span class="string">微直播吧:</span> <span class="string">http://www.sjzfgw.cn/</span></span><br><span class="line">  <span class="string">山猫直播:</span> <span class="string">https://smzb.cn/room/19082</span></span><br><span class="line">  <span class="string">JRS直播:</span> <span class="string">https://www.dbwf88.com/</span></span><br><span class="line">  <span class="string">抓饭直播:</span> <span class="string">http://www.zhuafan.live/</span></span><br><span class="line">  <span class="string">黑土直播:</span> <span class="string">https://www.cnmysoft.com/</span></span><br><span class="line">  <span class="string">看球吧(录像):</span> <span class="string">http://www.kanqiuba.net/</span></span><br><span class="line">  <span class="string">直播吧(录像):</span> <span class="string">http://www.zhiboba.tv/</span></span><br><span class="line">  <span class="string">搜球吧(录像):</span> <span class="string">https://www.uusnba.com/</span></span><br><span class="line">  </span><br><span class="line"><span class="attr">aboutme:</span> <span class="string">email</span> <span class="string">nba@iscurry.com</span> <span class="comment"># 关于我</span></span><br></pre></td></tr></table></figure><ol start="8"><li><p>hexo clean</p></li><li><p>hexo g</p></li><li><p>hexo s</p></li><li><p>配置git全局属性</p></li><li><p>hexo d</p></li><li><p>模块丢失  在blog/ </p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm init</span><br><span class="line">npm i hexo-generator-json-content --save </span><br></pre></td></tr></table></figure></li></ol><h1 id="3、实现文章目录"><a href="#3、实现文章目录" class="headerlink" title="3、实现文章目录"></a>3、实现文章目录</h1><h2 id="1、效果"><a href="#1、效果" class="headerlink" title="1、效果"></a>1、效果</h2><p><img src="d:\桌面\冉辰星总结\curryfor369Blog\source_posts\hexo博客搭建.assets\20200910184223.png" alt="image-20200904084702632"></p><h2 id="2、添加-CSS-样式"><a href="#2、添加-CSS-样式" class="headerlink" title="2、添加 CSS 样式"></a>2、添加 CSS 样式</h2><p>打开 <code>themes\yilia\source</code> 下的 <code>main.234bc0.css</code> 文件，直接在后面添加如下代码：  </p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 新添加的 */</span></span><br><span class="line"><span class="selector-id">#container</span> <span class="selector-class">.show-toc-btn</span>,<span class="selector-id">#container</span> <span class="selector-class">.toc-article</span>&#123;<span class="attribute">display</span>:block&#125;</span><br><span class="line"><span class="selector-class">.toc-article</span>&#123;<span class="attribute">z-index</span>:<span class="number">100</span>;<span class="attribute">background</span>:<span class="number">#fff</span>;<span class="attribute">border</span>:<span class="number">1px</span> solid <span class="number">#ccc</span>;<span class="attribute">max-width</span>:<span class="number">250px</span>;<span class="attribute">min-width</span>:<span class="number">150px</span>;<span class="attribute">max-height</span>:<span class="number">500px</span>;<span class="attribute">overflow-y</span>:auto;<span class="attribute">-webkit-box-shadow</span>:<span class="number">5px</span> <span class="number">5px</span> <span class="number">2px</span> <span class="number">#ccc</span>;<span class="attribute">box-shadow</span>:<span class="number">5px</span> <span class="number">5px</span> <span class="number">2px</span> <span class="number">#ccc</span>;<span class="attribute">font-size</span>:<span class="number">12px</span>;<span class="attribute">padding</span>:<span class="number">10px</span>;<span class="attribute">position</span>:fixed;<span class="attribute">right</span>:<span class="number">35px</span>;<span class="attribute">top</span>:<span class="number">129px</span>&#125;<span class="selector-class">.toc-article</span> <span class="selector-class">.toc-close</span>&#123;<span class="attribute">font-weight</span>:<span class="number">700</span>;<span class="attribute">font-size</span>:<span class="number">20px</span>;<span class="attribute">cursor</span>:pointer;<span class="attribute">float</span>:right;<span class="attribute">color</span>:<span class="number">#ccc</span>&#125;<span class="selector-class">.toc-article</span> <span class="selector-class">.toc-close</span><span class="selector-pseudo">:hover</span>&#123;<span class="attribute">color</span>:<span class="number">#000</span>&#125;<span class="selector-class">.toc-article</span> <span class="selector-class">.toc</span>&#123;<span class="attribute">font-size</span>:<span class="number">12px</span>;<span class="attribute">padding</span>:<span class="number">0</span>;<span class="attribute">line-height</span>:<span class="number">20px</span>&#125;<span class="selector-class">.toc-article</span> <span class="selector-class">.toc</span> <span class="selector-class">.toc-number</span>&#123;<span class="attribute">color</span>:<span class="number">#333</span>&#125;<span class="selector-class">.toc-article</span> <span class="selector-class">.toc</span> <span class="selector-class">.toc-text</span><span class="selector-pseudo">:hover</span>&#123;<span class="attribute">text-decoration</span>:underline;<span class="attribute">color</span>:<span class="number">#2a6496</span>&#125;<span class="selector-class">.toc-article</span> <span class="selector-tag">li</span>&#123;<span class="attribute">list-style-type</span>:none&#125;<span class="selector-class">.toc-article</span> <span class="selector-class">.toc-level-1</span>&#123;<span class="attribute">margin</span>:<span class="number">4px</span> <span class="number">0</span>&#125;<span class="selector-class">.toc-article</span> <span class="selector-class">.toc-child</span>&#123;&#125;<span class="keyword">@-moz-keyframes</span> cd-bounce-<span class="number">1</span>&#123;0%&#123;<span class="attribute">opacity</span>:<span class="number">0</span>;<span class="attribute">-o-transform</span>:<span class="built_in">scale</span>(<span class="number">1</span>);<span class="attribute">-webkit-transform</span>:<span class="built_in">scale</span>(<span class="number">1</span>);<span class="attribute">-moz-transform</span>:<span class="built_in">scale</span>(<span class="number">1</span>);<span class="attribute">-ms-transform</span>:<span class="built_in">scale</span>(<span class="number">1</span>);<span class="attribute">transform</span>:<span class="built_in">scale</span>(<span class="number">1</span>)&#125;60%&#123;<span class="attribute">opacity</span>:<span class="number">1</span>;<span class="attribute">-o-transform</span>:<span class="built_in">scale</span>(<span class="number">1.01</span>);<span class="attribute">-webkit-transform</span>:<span class="built_in">scale</span>(<span class="number">1.01</span>);<span class="attribute">-moz-transform</span>:<span class="built_in">scale</span>(<span class="number">1.01</span>);<span class="attribute">-ms-transform</span>:<span class="built_in">scale</span>(<span class="number">1.01</span>);<span class="attribute">transform</span>:<span class="built_in">scale</span>(<span class="number">1.01</span>)&#125;100%&#123;<span class="attribute">-o-transform</span>:<span class="built_in">scale</span>(<span class="number">1</span>);<span class="attribute">-webkit-transform</span>:<span class="built_in">scale</span>(<span class="number">1</span>);<span class="attribute">-moz-transform</span>:<span class="built_in">scale</span>(<span class="number">1</span>);<span class="attribute">-ms-transform</span>:<span class="built_in">scale</span>(<span class="number">1</span>);<span class="attribute">transform</span>:<span class="built_in">scale</span>(<span class="number">1</span>)&#125;&#125;<span class="keyword">@-webkit-keyframes</span> cd-bounce-<span class="number">1</span>&#123;0%&#123;<span class="attribute">opacity</span>:<span class="number">0</span>;<span class="attribute">-o-transform</span>:<span class="built_in">scale</span>(<span class="number">1</span>);<span class="attribute">-webkit-transform</span>:<span class="built_in">scale</span>(<span class="number">1</span>);<span class="attribute">-moz-transform</span>:<span class="built_in">scale</span>(<span class="number">1</span>);<span class="attribute">-ms-transform</span>:<span class="built_in">scale</span>(<span class="number">1</span>);<span class="attribute">transform</span>:<span class="built_in">scale</span>(<span class="number">1</span>)&#125;60%&#123;<span class="attribute">opacity</span>:<span class="number">1</span>;<span class="attribute">-o-transform</span>:<span class="built_in">scale</span>(<span class="number">1.01</span>);<span class="attribute">-webkit-transform</span>:<span class="built_in">scale</span>(<span class="number">1.01</span>);<span class="attribute">-moz-transform</span>:<span class="built_in">scale</span>(<span class="number">1.01</span>);<span class="attribute">-ms-transform</span>:<span class="built_in">scale</span>(<span class="number">1.01</span>);<span class="attribute">transform</span>:<span class="built_in">scale</span>(<span class="number">1.01</span>)&#125;100%&#123;<span class="attribute">-o-transform</span>:<span class="built_in">scale</span>(<span class="number">1</span>);<span class="attribute">-webkit-transform</span>:<span class="built_in">scale</span>(<span class="number">1</span>);<span class="attribute">-moz-transform</span>:<span class="built_in">scale</span>(<span class="number">1</span>);<span class="attribute">-ms-transform</span>:<span class="built_in">scale</span>(<span class="number">1</span>);<span class="attribute">transform</span>:<span class="built_in">scale</span>(<span class="number">1</span>)&#125;&#125;<span class="keyword">@-o-keyframes</span> cd-bounce-<span class="number">1</span>&#123;0%&#123;<span class="attribute">opacity</span>:<span class="number">0</span>;<span class="attribute">-o-transform</span>:<span class="built_in">scale</span>(<span class="number">1</span>);<span class="attribute">-webkit-transform</span>:<span class="built_in">scale</span>(<span class="number">1</span>);<span class="attribute">-moz-transform</span>:<span class="built_in">scale</span>(<span class="number">1</span>);<span class="attribute">-ms-transform</span>:<span class="built_in">scale</span>(<span class="number">1</span>);<span class="attribute">transform</span>:<span class="built_in">scale</span>(<span class="number">1</span>)&#125;60%&#123;<span class="attribute">opacity</span>:<span class="number">1</span>;<span class="attribute">-o-transform</span>:<span class="built_in">scale</span>(<span class="number">1.01</span>);<span class="attribute">-webkit-transform</span>:<span class="built_in">scale</span>(<span class="number">1.01</span>);<span class="attribute">-moz-transform</span>:<span class="built_in">scale</span>(<span class="number">1.01</span>);<span class="attribute">-ms-transform</span>:<span class="built_in">scale</span>(<span class="number">1.01</span>);<span class="attribute">transform</span>:<span class="built_in">scale</span>(<span class="number">1.01</span>)&#125;100%&#123;<span class="attribute">-o-transform</span>:<span class="built_in">scale</span>(<span class="number">1</span>);<span class="attribute">-webkit-transform</span>:<span class="built_in">scale</span>(<span class="number">1</span>);<span class="attribute">-moz-transform</span>:<span class="built_in">scale</span>(<span class="number">1</span>);<span class="attribute">-ms-transform</span>:<span class="built_in">scale</span>(<span class="number">1</span>);<span class="attribute">transform</span>:<span class="built_in">scale</span>(<span class="number">1</span>)&#125;&#125;<span class="keyword">@keyframes</span> cd-bounce-<span class="number">1</span>&#123;0%&#123;<span class="attribute">opacity</span>:<span class="number">0</span>;<span class="attribute">-o-transform</span>:<span class="built_in">scale</span>(<span class="number">1</span>);<span class="attribute">-webkit-transform</span>:<span class="built_in">scale</span>(<span class="number">1</span>);<span class="attribute">-moz-transform</span>:<span class="built_in">scale</span>(<span class="number">1</span>);<span class="attribute">-ms-transform</span>:<span class="built_in">scale</span>(<span class="number">1</span>);<span class="attribute">transform</span>:<span class="built_in">scale</span>(<span class="number">1</span>)&#125;60%&#123;<span class="attribute">opacity</span>:<span class="number">1</span>;<span class="attribute">-o-transform</span>:<span class="built_in">scale</span>(<span class="number">1.01</span>);<span class="attribute">-webkit-transform</span>:<span class="built_in">scale</span>(<span class="number">1.01</span>);<span class="attribute">-moz-transform</span>:<span class="built_in">scale</span>(<span class="number">1.01</span>);<span class="attribute">-ms-transform</span>:<span class="built_in">scale</span>(<span class="number">1.01</span>);<span class="attribute">transform</span>:<span class="built_in">scale</span>(<span class="number">1.01</span>)&#125;100%&#123;<span class="attribute">-o-transform</span>:<span class="built_in">scale</span>(<span class="number">1</span>);<span class="attribute">-webkit-transform</span>:<span class="built_in">scale</span>(<span class="number">1</span>);<span class="attribute">-moz-transform</span>:<span class="built_in">scale</span>(<span class="number">1</span>);<span class="attribute">-ms-transform</span>:<span class="built_in">scale</span>(<span class="number">1</span>);<span class="attribute">transform</span>:<span class="built_in">scale</span>(<span class="number">1</span>)&#125;&#125;<span class="selector-class">.show-toc-btn</span>&#123;<span class="attribute">display</span>:none;<span class="attribute">z-index</span>:<span class="number">10</span>;<span class="attribute">width</span>:<span class="number">30px</span>;<span class="attribute">min-height</span>:<span class="number">14px</span>;<span class="attribute">overflow</span>:hidden;<span class="attribute">padding</span>:<span class="number">4px</span> <span class="number">6px</span> <span class="number">8px</span> <span class="number">5px</span>;<span class="attribute">border</span>:<span class="number">1px</span> solid <span class="number">#ddd</span>;<span class="attribute">border-right</span>:none;<span class="attribute">position</span>:fixed;<span class="attribute">right</span>:<span class="number">40px</span>;<span class="attribute">text-align</span>:center;<span class="attribute">background-color</span>:<span class="number">#f9f9f9</span>&#125;<span class="selector-class">.show-toc-btn</span> <span class="selector-class">.btn-bg</span>&#123;<span class="attribute">margin-top</span>:<span class="number">2px</span>;<span class="attribute">display</span>:block;<span class="attribute">width</span>:<span class="number">16px</span>;<span class="attribute">height</span>:<span class="number">14px</span>;<span class="attribute">background</span>:<span class="built_in">url</span>(http://<span class="number">7</span>xtawy.com1.z0.glb.clouddn.com/show.png) no-repeat;<span class="attribute">-webkit-background-size</span>:<span class="number">100%</span>;<span class="attribute">-moz-background-size</span>:<span class="number">100%</span>;<span class="attribute">background-size</span>:<span class="number">100%</span>&#125;<span class="selector-class">.show-toc-btn</span> <span class="selector-class">.btn-text</span>&#123;<span class="attribute">color</span>:<span class="number">#999</span>;<span class="attribute">font-size</span>:<span class="number">12px</span>&#125;<span class="selector-class">.show-toc-btn</span><span class="selector-pseudo">:hover</span>&#123;<span class="attribute">cursor</span>:pointer&#125;<span class="selector-class">.show-toc-btn</span><span class="selector-pseudo">:hover</span> <span class="selector-class">.btn-bg</span>&#123;<span class="attribute">background-position</span>:<span class="number">0</span> -<span class="number">16px</span>&#125;<span class="selector-class">.show-toc-btn</span><span class="selector-pseudo">:hover</span> <span class="selector-class">.btn-text</span>&#123;<span class="attribute">font-size</span>:<span class="number">12px</span>;<span class="attribute">color</span>:<span class="number">#ea8010</span>&#125;</span><br><span class="line"><span class="selector-class">.toc-article</span> <span class="selector-tag">li</span> <span class="selector-tag">ol</span>, <span class="selector-class">.toc-article</span> <span class="selector-tag">li</span> <span class="selector-tag">ul</span> &#123;</span><br><span class="line">    <span class="attribute">margin-left</span>: <span class="number">30px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.toc-article</span> <span class="selector-tag">ol</span>, <span class="selector-class">.toc-article</span> <span class="selector-tag">ul</span> &#123;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">10px</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="3、修改-article-ejs-文件"><a href="#3、修改-article-ejs-文件" class="headerlink" title="3、修改 article.ejs 文件"></a>3、修改 article.ejs 文件</h2><p>打开 <code>themes\yilia\layout\_partial</code> 文件夹下的 <code>article.ejs</code> 文件, 在 <code>&lt;/header&gt; &lt;% &#125; %&gt;</code> 下面加入如下内容（注意位置）</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 目录内容 --&gt;</span><br><span class="line">&lt;% if (!index &amp;&amp; post.toc)&#123; %&gt;</span><br><span class="line">    &lt;p class&#x3D;&quot;show-toc-btn&quot; id&#x3D;&quot;show-toc-btn&quot; onclick&#x3D;&quot;showToc();&quot; style&#x3D;&quot;display:none&quot;&gt;</span><br><span class="line">          &lt;span class&#x3D;&quot;btn-bg&quot;&gt;&lt;&#x2F;span&gt;</span><br><span class="line">          &lt;span class&#x3D;&quot;btn-text&quot;&gt;文章导航&lt;&#x2F;span&gt;</span><br><span class="line">          &lt;&#x2F;p&gt;</span><br><span class="line">    &lt;div id&#x3D;&quot;toc-article&quot; class&#x3D;&quot;toc-article&quot;&gt;</span><br><span class="line">        &lt;span id&#x3D;&quot;toc-close&quot; class&#x3D;&quot;toc-close&quot; title&#x3D;&quot;隐藏导航&quot; onclick&#x3D;&quot;showBtn();&quot;&gt;×&lt;&#x2F;span&gt;</span><br><span class="line">        &lt;strong class&#x3D;&quot;toc-title&quot;&gt;文章目录&lt;&#x2F;strong&gt;</span><br><span class="line">           &lt;%- toc(post.content) %&gt;</span><br><span class="line">         &lt;&#x2F;div&gt;</span><br><span class="line">   &lt;script type&#x3D;&quot;text&#x2F;javascript&quot;&gt;</span><br><span class="line">    function showToc()&#123;</span><br><span class="line">        var toc_article &#x3D; document.getElementById(&quot;toc-article&quot;);</span><br><span class="line">        var show_toc_btn &#x3D; document.getElementById(&quot;show-toc-btn&quot;);</span><br><span class="line">        toc_article.setAttribute(&quot;style&quot;,&quot;display:block&quot;);</span><br><span class="line">        show_toc_btn.setAttribute(&quot;style&quot;,&quot;display:none&quot;);</span><br><span class="line">        &#125;;</span><br><span class="line">    function showBtn()&#123;</span><br><span class="line">        var toc_article &#x3D; document.getElementById(&quot;toc-article&quot;);</span><br><span class="line">        var show_toc_btn &#x3D; document.getElementById(&quot;show-toc-btn&quot;);</span><br><span class="line">        toc_article.setAttribute(&quot;style&quot;,&quot;display:none&quot;);</span><br><span class="line">        show_toc_btn.setAttribute(&quot;style&quot;,&quot;display:block&quot;);</span><br><span class="line">        &#125;;</span><br><span class="line">   &lt;&#x2F;script&gt;</span><br><span class="line">      &lt;% &#125; %&gt;</span><br><span class="line">&lt;!-- 目录内容结束 --&gt;</span><br></pre></td></tr></table></figure><h2 id="4、在每篇文章开头加入：toc-true"><a href="#4、在每篇文章开头加入：toc-true" class="headerlink" title="4、在每篇文章开头加入：toc: true"></a>4、在每篇文章开头加入：<code>toc: true</code></h2><ul><li>在yilia\_config.yml 修改 toc: 1</li></ul><p><img src="https://gitee.com/curryfor369/picgo/raw/master/img/20200910184222.png" alt="image-20200904084332396"></p><h1 id="4、rss订阅"><a href="#4、rss订阅" class="headerlink" title="4、rss订阅"></a>4、rss订阅</h1><ol><li><p>安装插件 <code>npm install hexo-generator-feed</code></p></li><li><p>_config.yml </p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Extensions</span></span><br><span class="line"><span class="attr">theme:</span> <span class="string">yilia</span></span><br><span class="line"><span class="attr">plugins:</span></span><br><span class="line">  <span class="string">hexo-generator-feed</span></span><br><span class="line"><span class="comment">#Feed Atom</span></span><br><span class="line"><span class="attr">feed:</span></span><br><span class="line">  <span class="attr">type:</span> <span class="string">atom</span></span><br><span class="line">  <span class="attr">path:</span> <span class="string">atom.xml</span></span><br><span class="line">  <span class="attr">limit:</span> <span class="number">20</span> <span class="comment"># 最新的20篇文章</span></span><br></pre></td></tr></table></figure></li></ol><ol start="3"><li><p>yilia/_config.yml</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># SubNav</span></span><br><span class="line"><span class="attr">subnav:</span></span><br><span class="line">  <span class="attr">rss:</span> <span class="string">&quot;atom.xml&quot;</span> </span><br></pre></td></tr></table></figure></li><li><p><code>hexo clean, hexo g</code>后会在<code>public</code>目录下生成<code>auto.xml</code>订阅文件，到浏览器进行访问，点击图标会跳转到<code>*/auto.xml</code>界面，显示最近的几篇文章的更新。</p></li></ol><h1 id="5、百度统计"><a href="#5、百度统计" class="headerlink" title="5、百度统计"></a>5、百度统计</h1><ol><li><p>百度统计进去注册，代码获取，新增网站，网站和首页都填curryfor369.github.io</p></li><li><p>复制代码到 /themes/yilia/layout/_partial/baidu-analytices.ejs</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span></span><br><span class="line"><span class="javascript"><span class="keyword">var</span> _hmt = _hmt || [];</span></span><br><span class="line"><span class="javascript">(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">  <span class="keyword">var</span> hm = <span class="built_in">document</span>.createElement(<span class="string">&quot;script&quot;</span>);</span></span><br><span class="line"><span class="javascript">  hm.src = <span class="string">&quot;https://hm.baidu.com/hm.js?这里是id&quot;</span>;</span></span><br><span class="line"><span class="javascript">  <span class="keyword">var</span> s = <span class="built_in">document</span>.getElementsByTagName(<span class="string">&quot;script&quot;</span>)[<span class="number">0</span>]; </span></span><br><span class="line">  s.parentNode.insertBefore(hm, s);</span><br><span class="line">&#125;)();</span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ol><ol start="3"><li><p>复制id到 /themes/yilia/_config.yml</p><p><img src="https://gitee.com/curryfor369/picgo/raw/master/img/20200910184221.png" alt="image-20200904084258994"></p><p><img src="https://gitee.com/curryfor369/picgo/raw/master/img/20200910184224.png"></p></li></ol><h1 id="6、代码复制"><a href="#6、代码复制" class="headerlink" title="6、代码复制"></a>6、代码复制</h1><ol><li><p>创建yilia\source\jsclipboard_use.js，添加代码</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">&quot;.highlight&quot;</span>).wrap(<span class="string">&quot;&lt;div class=&#x27;code-wrapper&#x27; style=&#x27;position:relative&#x27;&gt;&lt;/div&gt;&quot;</span>);</span><br><span class="line"><span class="comment">/*页面载入完成后，创建复制按钮*/</span></span><br><span class="line">!<span class="function"><span class="keyword">function</span> (<span class="params">e, t, a</span>) </span>&#123;</span><br><span class="line">    <span class="comment">/* code */</span></span><br><span class="line">    <span class="keyword">var</span> initCopyCode = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> copyHtml = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">        copyHtml += <span class="string">&#x27;&lt;button class=&quot;btn-copy&quot; data-clipboard-snippet=&quot;&quot;&gt;&#x27;</span>;</span><br><span class="line">        copyHtml += <span class="string">&#x27;  &lt;i class=&quot;fa fa-clipboard&quot;&gt;&lt;/i&gt;&lt;span&gt;复制&lt;/span&gt;&#x27;</span>;</span><br><span class="line">        copyHtml += <span class="string">&#x27;&lt;/button&gt;&#x27;</span>;</span><br><span class="line">        $(<span class="string">&quot;.highlight .code&quot;</span>).before(copyHtml);</span><br><span class="line">        <span class="keyword">var</span> clipboard = <span class="keyword">new</span> ClipboardJS(<span class="string">&#x27;.btn-copy&#x27;</span>, &#123;</span><br><span class="line">            target: <span class="function"><span class="keyword">function</span> (<span class="params">trigger</span>) </span>&#123;</span><br><span class="line">                <span class="keyword">return</span> trigger.nextElementSibling;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        clipboard.on(<span class="string">&#x27;success&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span><br><span class="line">            e.trigger.innerHTML = <span class="string">&quot;&lt;i class=&#x27;fa fa-clipboard&#x27;&gt;&lt;/i&gt;&lt;span&gt;复制成功&lt;/span&gt;&quot;</span></span><br><span class="line">            <span class="built_in">setTimeout</span>(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">                e.trigger.innerHTML = <span class="string">&quot;&lt;i class=&#x27;fa fa-clipboard&#x27;&gt;&lt;/i&gt;&lt;span&gt;复制&lt;/span&gt;&quot;</span></span><br><span class="line">            &#125;, <span class="number">1000</span>)</span><br><span class="line">           </span><br><span class="line">            e.clearSelection();</span><br><span class="line">        &#125;);</span><br><span class="line">        clipboard.on(<span class="string">&#x27;error&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span><br><span class="line">            e.trigger.innerHTML = <span class="string">&quot;&lt;i class=&#x27;fa fa-clipboard&#x27;&gt;&lt;/i&gt;&lt;span&gt;复制失败&lt;/span&gt;&quot;</span></span><br><span class="line">            <span class="built_in">setTimeout</span>(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">                e.trigger.innerHTML = <span class="string">&quot;&lt;i class=&#x27;fa fa-clipboard&#x27;&gt;&lt;/i&gt;&lt;span&gt;复制&lt;/span&gt;&quot;</span></span><br><span class="line">            &#125;, <span class="number">1000</span>)</span><br><span class="line">            e.clearSelection();</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">    initCopyCode();</span><br><span class="line">&#125;(<span class="built_in">window</span>, <span class="built_in">document</span>);</span><br></pre></td></tr></table></figure></li><li><p>在yilia\layout\layout.ejs 添加代码，&lt;body&gt;之前</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 代码块复制功能 --&gt;</span><br><span class="line">&lt;script type&#x3D;&quot;text&#x2F;javascript&quot; src&#x3D;&quot;https:&#x2F;&#x2F;cdn.jsdelivr.net&#x2F;npm&#x2F;clipboard@2.0.4&#x2F;dist&#x2F;clipboard.js&quot;&gt;&lt;&#x2F;script&gt;</span><br><span class="line">&lt;script type&#x3D;&quot;text&#x2F;javascript&quot; src&#x3D;&quot;https:&#x2F;&#x2F;apps.bdimg.com&#x2F;libs&#x2F;jquery&#x2F;2.1.4&#x2F;jquery.min.js&quot;&gt;&lt;&#x2F;script&gt;</span><br><span class="line">&lt;script type&#x3D;&quot;text&#x2F;javascript&quot; src&#x3D;&quot;&#x2F;js&#x2F;clipboard_use.js&quot;&gt;&lt;&#x2F;script&gt;</span><br></pre></td></tr></table></figure></li><li><p>yilia\source\main.0cf68a.css 添加</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*代码复制按钮*/</span></span><br><span class="line"><span class="selector-class">.btn-copy</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: inline-block;</span><br><span class="line">    <span class="attribute">cursor</span>: pointer;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="number">#eee</span>;</span><br><span class="line">    <span class="attribute">background-image</span>: <span class="built_in">linear-gradient</span>(#fcfcfc, #eee);</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#d5d5d5</span>;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">3px</span>;</span><br><span class="line">    <span class="attribute">-webkit-user-select</span>: none;</span><br><span class="line">    <span class="attribute">-moz-user-select</span>: none;</span><br><span class="line">    <span class="attribute">-ms-user-select</span>: none;</span><br><span class="line">    <span class="attribute">user-select</span>: none;</span><br><span class="line">    <span class="attribute">-webkit-appearance</span>: none;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">13px</span>;</span><br><span class="line">    <span class="attribute">font-weight</span>: <span class="number">700</span>;</span><br><span class="line">    <span class="attribute">line-height</span>: <span class="number">20px</span>;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#333</span>;</span><br><span class="line">    <span class="attribute">-webkit-transition</span>: opacity .<span class="number">3s</span> ease-in-out;</span><br><span class="line">    <span class="attribute">-o-transition</span>: opacity .<span class="number">3s</span> ease-in-out;</span><br><span class="line">    <span class="attribute">transition</span>: opacity .<span class="number">3s</span> ease-in-out;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">2px</span> <span class="number">6px</span>;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">right</span>: <span class="number">5px</span>;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">5px</span>;</span><br><span class="line">    <span class="attribute">opacity</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.btn-copy</span> <span class="selector-tag">span</span> &#123;</span><br><span class="line">    <span class="attribute">margin-left</span>: <span class="number">5px</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.code-wrapper</span><span class="selector-pseudo">:hover</span> <span class="selector-class">.btn-copy</span> &#123;</span><br><span class="line">    <span class="attribute">opacity</span>: <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><h1 id="7、点击特效"><a href="#7、点击特效" class="headerlink" title="7、点击特效"></a>7、点击特效</h1><ol><li><p>yilia\source下新建love.js,内容</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">!<span class="function"><span class="keyword">function</span>(<span class="params">e,t,a</span>)</span>&#123;<span class="function"><span class="keyword">function</span> <span class="title">n</span>(<span class="params"></span>)</span>&#123;c(<span class="string">&quot;.heart&#123;width: 10px;height: 10px;position: fixed;background: #f00;transform: rotate(45deg);-webkit-transform: rotate(45deg);-moz-transform: rotate(45deg);&#125;.heart:after,.heart:before&#123;content: &#x27;&#x27;;width: inherit;height: inherit;background: inherit;border-radius: 50%;-webkit-border-radius: 50%;-moz-border-radius: 50%;position: fixed;&#125;.heart:after&#123;top: -5px;&#125;.heart:before&#123;left: -5px;&#125;&quot;</span>),o(),r()&#125;<span class="function"><span class="keyword">function</span> <span class="title">r</span>(<span class="params"></span>)</span>&#123;<span class="keyword">for</span>(<span class="keyword">var</span> e=<span class="number">0</span>;e&lt;d.length;e++)d[e].alpha&lt;=<span class="number">0</span>?(t.body.removeChild(d[e].el),d.splice(e,<span class="number">1</span>)):(d[e].y--,d[e].scale+=<span class="number">.004</span>,d[e].alpha-=<span class="number">.013</span>,d[e].el.style.cssText=<span class="string">&quot;left:&quot;</span>+d[e].x+<span class="string">&quot;px;top:&quot;</span>+d[e].y+<span class="string">&quot;px;opacity:&quot;</span>+d[e].alpha+<span class="string">&quot;;transform:scale(&quot;</span>+d[e].scale+<span class="string">&quot;,&quot;</span>+d[e].scale+<span class="string">&quot;) rotate(45deg);background:&quot;</span>+d[e].color+<span class="string">&quot;;z-index:99999&quot;</span>);requestAnimationFrame(r)&#125;<span class="function"><span class="keyword">function</span> <span class="title">o</span>(<span class="params"></span>)</span>&#123;<span class="keyword">var</span> t=<span class="string">&quot;function&quot;</span>==<span class="keyword">typeof</span> e.onclick&amp;&amp;e.onclick;e.onclick=<span class="function"><span class="keyword">function</span>(<span class="params">e</span>)</span>&#123;t&amp;&amp;t(),i(e)&#125;&#125;<span class="function"><span class="keyword">function</span> <span class="title">i</span>(<span class="params">e</span>)</span>&#123;<span class="keyword">var</span> a=t.createElement(<span class="string">&quot;div&quot;</span>);a.className=<span class="string">&quot;heart&quot;</span>,d.push(&#123;<span class="attr">el</span>:a,<span class="attr">x</span>:e.clientX<span class="number">-5</span>,<span class="attr">y</span>:e.clientY<span class="number">-5</span>,<span class="attr">scale</span>:<span class="number">1</span>,<span class="attr">alpha</span>:<span class="number">1</span>,<span class="attr">color</span>:s()&#125;),t.body.appendChild(a)&#125;<span class="function"><span class="keyword">function</span> <span class="title">c</span>(<span class="params">e</span>)</span>&#123;<span class="keyword">var</span> a=t.createElement(<span class="string">&quot;style&quot;</span>);a.type=<span class="string">&quot;text/css&quot;</span>;<span class="keyword">try</span>&#123;a.appendChild(t.createTextNode(e))&#125;<span class="keyword">catch</span>(t)&#123;a.styleSheet.cssText=e&#125;t.getElementsByTagName(<span class="string">&quot;head&quot;</span>)[<span class="number">0</span>].appendChild(a)&#125;<span class="function"><span class="keyword">function</span> <span class="title">s</span>(<span class="params"></span>)</span>&#123;<span class="keyword">return</span><span class="string">&quot;rgb(&quot;</span>+~~(<span class="number">255</span>*<span class="built_in">Math</span>.random())+<span class="string">&quot;,&quot;</span>+~~(<span class="number">255</span>*<span class="built_in">Math</span>.random())+<span class="string">&quot;,&quot;</span>+~~(<span class="number">255</span>*<span class="built_in">Math</span>.random())+<span class="string">&quot;)&quot;</span>&#125;<span class="keyword">var</span> d=[];e.requestAnimationFrame=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;<span class="keyword">return</span> e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||e.oRequestAnimationFrame||e.msRequestAnimationFrame||<span class="function"><span class="keyword">function</span>(<span class="params">e</span>)</span>&#123;<span class="built_in">setTimeout</span>(e,<span class="number">1e3</span>/<span class="number">60</span>)&#125;&#125;(),n()&#125;(<span class="built_in">window</span>,<span class="built_in">document</span>);</span><br></pre></td></tr></table></figure><ol start="2"><li>引入js,yilia\layout\ _partial\footer.ejs中引入js</li></ol><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 页面点击小红心 --&gt;</span><br><span class="line">&lt;script type&#x3D;&quot;text&#x2F;javascript&quot; src&#x3D;&quot;&#x2F;love.js&quot;&gt;&lt;&#x2F;script&gt;</span><br></pre></td></tr></table></figure></li></ol><h1 id="8、分类，归档，评论"><a href="#8、分类，归档，评论" class="headerlink" title="8、分类，归档，评论"></a>8、分类，归档，评论</h1><h1 id="9、侧边栏隐藏"><a href="#9、侧边栏隐藏" class="headerlink" title="9、侧边栏隐藏"></a>9、侧边栏隐藏</h1><ol><li><p>添加css,<code>themes\yilia\source\main.0cf68a.css</code></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*侧边栏隐藏*/</span></span><br><span class="line"><span class="selector-class">.mymenucontainer</span> &#123;</span><br><span class="line"><span class="attribute">display</span>:block;</span><br><span class="line"><span class="attribute">cursor</span>:pointer;</span><br><span class="line"><span class="attribute">left</span>:<span class="number">0</span>;</span><br><span class="line"><span class="attribute">top</span>:<span class="number">0</span>;</span><br><span class="line"><span class="attribute">width</span>:<span class="number">35px</span>;</span><br><span class="line"><span class="attribute">height</span>:<span class="number">35px</span>;</span><br><span class="line"><span class="attribute">z-index</span>:<span class="number">9999</span>;</span><br><span class="line"><span class="attribute">position</span>:fixed;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.bar1</span> &#123;</span><br><span class="line"><span class="attribute">width</span>:<span class="number">35px</span>;</span><br><span class="line"><span class="attribute">height</span>:<span class="number">3px</span>;</span><br><span class="line"><span class="attribute">background-color</span>:<span class="number">#333</span>;</span><br><span class="line"><span class="attribute">margin</span>:<span class="number">6px</span> <span class="number">0</span>;</span><br><span class="line"><span class="attribute">transition</span>:<span class="number">0.4s</span>;</span><br><span class="line"><span class="attribute">-webkit-transform</span>:<span class="built_in">rotate</span>(-<span class="number">45deg</span>) <span class="built_in">translate</span>(-<span class="number">8px</span>,<span class="number">8px</span>);</span><br><span class="line"><span class="attribute">transform</span>:<span class="built_in">rotate</span>(-<span class="number">45deg</span>) <span class="built_in">translate</span>(-<span class="number">8px</span>,<span class="number">8px</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.bar2</span> &#123;</span><br><span class="line"><span class="attribute">width</span>:<span class="number">35px</span>;</span><br><span class="line"><span class="attribute">height</span>:<span class="number">3px</span>;</span><br><span class="line"><span class="attribute">background-color</span>:<span class="number">#333</span>;</span><br><span class="line"><span class="attribute">margin</span>:<span class="number">6px</span> <span class="number">0</span>;</span><br><span class="line"><span class="attribute">transition</span>:<span class="number">0.4s</span>;</span><br><span class="line"><span class="attribute">opacity</span>:<span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.bar3</span> &#123;</span><br><span class="line"><span class="attribute">width</span>:<span class="number">35px</span>;</span><br><span class="line"><span class="attribute">height</span>:<span class="number">3px</span>;</span><br><span class="line"><span class="attribute">background-color</span>:<span class="number">#333</span>;</span><br><span class="line"><span class="attribute">margin</span>:<span class="number">6px</span> <span class="number">0</span>;</span><br><span class="line"><span class="attribute">transition</span>:<span class="number">0.4s</span>;</span><br><span class="line"><span class="attribute">-webkit-transform</span>:<span class="built_in">rotate</span>(<span class="number">45deg</span>) <span class="built_in">translate</span>(-<span class="number">4px</span>,-<span class="number">6px</span>);</span><br><span class="line"><span class="attribute">transform</span>:<span class="built_in">rotate</span>(<span class="number">45deg</span>) <span class="built_in">translate</span>(-<span class="number">4px</span>,-<span class="number">6px</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.change</span> <span class="selector-class">.bar1</span> &#123;</span><br><span class="line"><span class="attribute">-webkit-transform</span>:<span class="built_in">rotate</span>(<span class="number">0deg</span>) <span class="built_in">translate</span>(<span class="number">0px</span>,<span class="number">0px</span>);</span><br><span class="line"><span class="attribute">transform</span>:<span class="built_in">rotate</span>(<span class="number">0deg</span>) <span class="built_in">translate</span>(<span class="number">0px</span>,<span class="number">0px</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.change</span> <span class="selector-class">.bar2</span> &#123;</span><br><span class="line"><span class="attribute">opacity</span>:<span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.change</span> <span class="selector-class">.bar3</span> &#123;</span><br><span class="line"><span class="attribute">-webkit-transform</span>:<span class="built_in">rotate</span>(<span class="number">0deg</span>) <span class="built_in">translate</span>(<span class="number">0px</span>,<span class="number">0px</span>);</span><br><span class="line"><span class="attribute">transform</span>:<span class="built_in">rotate</span>(<span class="number">0deg</span>) <span class="built_in">translate</span>(<span class="number">0px</span>,<span class="number">0px</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*侧边栏隐藏结束*/</span></span><br></pre></td></tr></table></figure></li></ol><ol start="2"><li><p>添加按钮到相应的位置,``yilia\layout\layout.ejs<code>,在</code>&lt;div class=”left-col”`上方添加,在body后html前添加js</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;mymenucontainer&quot;</span> <span class="attr">onclick</span>=<span class="string">&quot;myFunction(this)&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;bar1&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;bar2&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;bar3&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> hide = <span class="literal">false</span>;</span></span><br><span class="line"><span class="javascript">        <span class="function"><span class="keyword">function</span> <span class="title">myFunction</span>(<span class="params">x</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">            x.classList.toggle(<span class="string">&quot;change&quot;</span>);</span></span><br><span class="line"><span class="javascript">            <span class="keyword">if</span>(hide == <span class="literal">false</span>)&#123;</span></span><br><span class="line"><span class="javascript">                $(<span class="string">&quot;.left-col&quot;</span>).css(<span class="string">&#x27;display&#x27;</span>, <span class="string">&#x27;none&#x27;</span>);</span></span><br><span class="line"><span class="javascript">                $(<span class="string">&quot;.mid-col&quot;</span>).css(<span class="string">&quot;left&quot;</span>, <span class="number">6</span>);</span></span><br><span class="line"><span class="javascript">                $(<span class="string">&quot;.tools-col&quot;</span>).css(<span class="string">&#x27;display&#x27;</span>, <span class="string">&#x27;none&#x27;</span>);</span></span><br><span class="line"><span class="javascript">                $(<span class="string">&quot;.tools-col.hide&quot;</span>).css(<span class="string">&#x27;display&#x27;</span>, <span class="string">&#x27;none&#x27;</span>);</span></span><br><span class="line"><span class="javascript">                hide = <span class="literal">true</span>;</span></span><br><span class="line"><span class="javascript">            &#125;<span class="keyword">else</span>&#123;</span></span><br><span class="line"><span class="javascript">                $(<span class="string">&quot;.left-col&quot;</span>).css(<span class="string">&#x27;display&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span></span><br><span class="line"><span class="javascript">                $(<span class="string">&quot;.mid-col&quot;</span>).css(<span class="string">&quot;left&quot;</span>, <span class="number">300</span>);</span></span><br><span class="line"><span class="javascript">                $(<span class="string">&quot;.tools-col&quot;</span>).css(<span class="string">&#x27;display&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span></span><br><span class="line"><span class="javascript">                $(<span class="string">&quot;.tools-col.hide&quot;</span>).css(<span class="string">&#x27;display&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span></span><br><span class="line"><span class="javascript">                hide = <span class="literal">false</span>;</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ol><h1 id="10、代码块长度"><a href="#10、代码块长度" class="headerlink" title="10、代码块长度"></a>10、代码块长度</h1><ol><li>修改yilia\source\main.0cd68a.css</li></ol><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.code-wrapper</span>&#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">80%</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="x、遇到的问题"><a href="#x、遇到的问题" class="headerlink" title="x、遇到的问题"></a>x、遇到的问题</h1><ol><li><p>本地服务器访问时正常，部署到远端后，css无效</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># 修改 _config.yml 第17行的root选项 加上仓库名 后重新清理生成部署</span><br><span class="line">17 root: &#x2F;blog</span><br></pre></td></tr></table></figure></li><li><p>hexo d 部署失败</p><blockquote><p>FATAL {   err: Error: Spawn failed       at ChildProcess.<anonymous>……}</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看用户名，邮箱是否正确</span></span><br><span class="line">git config --global user.name <span class="string">&quot;yourname&quot;</span></span><br><span class="line">git config --global user.email <span class="string">&quot;youremail&quot;</span></span><br><span class="line"><span class="comment"># 配置后重新部署</span></span><br><span class="line"><span class="comment"># 若还是错误，删掉根目录下的.deploy_git，再重新部署</span></span><br></pre></td></tr></table></figure></li></ol>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;1、搭建步骤&quot;&gt;&lt;a href=&quot;#1、搭建步骤&quot; class=&quot;headerlink&quot; title=&quot;1、搭建步骤&quot;&gt;&lt;/a&gt;1、搭建步骤&lt;/h1&gt;&lt;p&gt;注：cmd为管理员模式 环境： win10+git+github+nodejs&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;p&gt;下载cmder完整版，配置cmder, 管理员bash，开机bash，中文字符集&lt;/p&gt;</summary>
    
    
    
    
    <category term="blog" scheme="http://iscurry.com/tags/blog/"/>
    
  </entry>
  
</feed>
